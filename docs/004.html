<html>
<head>
<title>Solr Is Learning To Rank Better – Part 1 – Data Collection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Solr正在学习如何更好地排名——第1部分——数据收集</h1>
<blockquote>原文：<a href="https://web.archive.org/web/sease.io/2016/07/apache-solr-learning-to-rank-part-1-data-collection.html#0001-01-01">https://web.archive.org/web/sease.io/2016/07/apache-solr-learning-to-rank-part-1-data-collection.html#0001-01-01</a></blockquote>
									<section class="elementor-section elementor-top-section elementor-element elementor-element-93f8466 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="93f8466" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-6eb1b1b ot-flex-column-vertical" data-id="6eb1b1b" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-af0a4aa elementor-widget elementor-widget-iheading" data-id="af0a4aa" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">介绍</h2>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-2436d39 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="2436d39" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-cde1ef5 ot-flex-column-vertical" data-id="cde1ef5" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-8d6252c elementor-widget elementor-widget-text-editor" data-id="8d6252c" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">这篇博客文章是关于在Apache Solr搜索引擎中学习排名的必要旅程。</p><div><span style="font-weight: var( --e-global-typography-text-font-weight ); background-color: #ffffff;">Learning to Rank</span> <a style="font-weight: var( --e-global-typography-text-font-weight ); background-color: #ffffff;" href="https://web.archive.org/web/20220929234108/https://en.wikipedia.org/wiki/Learning_to_rank" target="_blank" rel="noopener">[1]</a> is the application of Machine Learning in the construction of ranking models for Information Retrieval systems.</div><div>Introducing supervised learning from user behaviour and signals can improve the relevancy of the documents retrieved bringing a new approach in ranking them.</div><div>Can be helpful in countless domains, refining free text search results or building a ranking algorithm where only filtering is happening and no initial scoring is available.</div><div><p class="translated">这一系列博客文章探索了从Signals集合到Apache Solr中的重新排序的完整旅程。</p></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-0120372 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="0120372" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-2bee3e6 ot-flex-column-vertical" data-id="2bee3e6" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-86a5795 elementor-widget elementor-widget-text-editor" data-id="86a5795" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><b>第1部分</b>将探索数据收集、数据建模和提炼阶段<br/> <a href="https://web.archive.org/web/20220929234108/https://sease.io/2016/08/apache-solr-learning-to-rank-part-2-model-training.html"> <b>第2部分</b> </a>将探索培训阶段<br/> <a href="https://web.archive.org/web/20220929234108/https://sease.io/2016/08/apache-solr-learning-to-rank-part-3-ltr-tools.html"> <b>第3部分</b> </a>将描述一套实用程序来分析您的模型<br/> <strong> <a href="https://web.archive.org/web/20220929234108/https://sease.io/2016/10/apache-solr-learning-to-rank-better-part-4.html">第4部分</a> </strong>将涵盖Solr集成</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-6342124 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="6342124" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-d0a2b0e ot-flex-column-vertical" data-id="d0a2b0e" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-b3fa8c0 elementor-widget elementor-widget-text-editor" data-id="b3fa8c0" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><p class="translated"><b>要求</b>:对机器学习的最少知识和兴趣</p><p class="translated">特别感谢迭戈·切卡雷利，他在2015年给了我很大的帮助，让我了解了这个令人惊叹的话题。<br/>再次特别感谢<b> Juan Luis Andrades </b>，感谢我们在这次旅程中分享的激情，以及<b> Jesse McLaughlin </b>对java技术的细致洞察。最后特别感谢大卫·本伯里，他以兴趣、激情和深思熟虑的想法为这项事业做出了贡献。</p></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-003213a ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="003213a" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-e5e9260 ot-flex-column-vertical" data-id="e5e9260" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-ec77ce1 elementor-widget elementor-widget-iheading" data-id="ec77ce1" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">收集信号</h2>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-03ca6df ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="03ca6df" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-97199b0 ot-flex-column-vertical" data-id="97199b0" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-461903a elementor-widget elementor-widget-text-editor" data-id="461903a" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>The start of the journey is the signals collection, it is a key phase and involves the modelling of the supervised training set that will be used to train the model.</div><div>A training set can be <b>Explicit</b> or <b>Implicit</b>.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-1dbe061 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="1dbe061" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-eebaf14 ot-flex-column-vertical" data-id="eebaf14" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-14d2b5c elementor-widget elementor-widget-text-editor" data-id="14d2b5c" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<h6 class="translated">含蓄的</h6><div>An Implicit training set is collected from user behaviours and interactions.</div><div><i><b>e.g</b>.</i></div><div><i>Historical sales and transactions of an E-commerce website</i></div><div><i>User Clicks in the search result page</i></div><div><i>Time spent on each document accessed</i></div><div><i> </i></div><div>A training set of this type is quite noisy but allows to collect great numbers of signals with small effort.</div><div>More the user was engaged with a particular document, stronger the signal of relevancy.</div><div><div><i><b>e.g</b>.</i></div><div><i>A sale of a product is a stronger signal of relevancy than adding it to the basket</i></div><div><i>User Clicks in the search result page in comparison with documents shown but not clicked</i></div><div><i>Longer you read a document, stronger the relevancy</i></div></div><div><i> </i></div><div><i>+ <b>Pros</b> : Cheap to build</i></div><div><i>– <b>Cons</b> : Noisy</i></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-13e4ad7 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="13e4ad7" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-89cf724 ot-flex-column-vertical" data-id="89cf724" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-10fefb1 elementor-widget elementor-widget-text-editor" data-id="10fefb1" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<h6 class="translated"><i>显式</i></h6><div>An Explicit training set is collected directly from the interaction with Human Experts.</div><div>Given a query and a set of documents, the Human expert will rate the relevancy of each document in the result set.</div><div>The score assigned to the document will rate how relevant the document was for the query.</div><div>To remove the subjective bias is suggested to use a team of experts to build the training set.</div><div>A training set of this type is highly accurate but it is really expensive to build as you need a huge team of experts to produce thousands of rating for all the queries of interest.</div><div> </div><div><div><i>+ Pros : Accuracy</i></div><div><i>– Cons : Expensive to build</i></div></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-6208dde ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="6208dde" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-8abf877 ot-flex-column-vertical" data-id="8abf877" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-05af3dd elementor-widget elementor-widget-text-editor" data-id="05af3dd" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<h6 class="translated">训练集</h6><div><div>The training set can have different forms, for the sake of this post we will focus on an algorithm that internally uses a  pairwise/listwise approach.</div><div>In particular the syntax exposed will be the RankLib <a href="https://web.archive.org/web/20220929234108/https://sourceforge.net/p/lemur/wiki/RankLib%20File%20Format/" target="_blank" rel="noopener">[2]</a><span style="color: var( --e-global-color-text ); font-weight: var( --e-global-typography-text-font-weight );"> syntax.</span></div></div><div>Each sample of the training set is a signal/event that describes a triple (Query-Document-Rating).</div><div>Let’s take as an example a query (1) and a document (1A)</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-fa05cd5 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="fa05cd5" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-1973936 ot-flex-column-vertical" data-id="1973936" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-2f95ad9 elementor-widget elementor-widget-text-editor" data-id="2f95ad9" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p style="padding-left: 40px;" class="translated">3 qid:1 1:1 2:1 3:0 # 1A</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-fb22762 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="fb22762" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-e8456cf ot-flex-column-vertical" data-id="e8456cf" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-41c1c6a elementor-widget elementor-widget-text-editor" data-id="41c1c6a" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>The document can be represented as a feature vector which is a vector of scalar numeric values.</div><div>Each element in the vector represents a specific aspect of the document.</div><div>We’ll see this in the feature part in details.</div><div>Let’s now focus in understanding the sample :</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-6850543 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="6850543" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-db703f0 ot-flex-column-vertical" data-id="db703f0" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-c05ffce elementor-widget elementor-widget-text-editor" data-id="c05ffce" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p style="padding-left: 40px;" class="translated">3 <br/>文档与查询的相关程度</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-a313ccb ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="a313ccb" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-abd7316 ot-flex-column-vertical" data-id="abd7316" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-81cc431 elementor-widget elementor-widget-text-editor" data-id="81cc431" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p style="padding-left: 40px;" class="translated">qid:1 <br/>识别查询</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-757a832 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="757a832" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-f315e81 ot-flex-column-vertical" data-id="f315e81" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-41c97b8 elementor-widget elementor-widget-text-editor" data-id="41c97b8" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p style="padding-left: 40px;" class="translated">1:1 2:1 3:0 <br/>文档，表示为数字特征的向量</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-8b42e6e ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="8b42e6e" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-3854131 ot-flex-column-vertical" data-id="3854131" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-6f68877 elementor-widget elementor-widget-text-editor" data-id="6f68877" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p style="padding-left: 40px;" class="translated"># 1A <br/>发表评论，让你的训练数据更具可读性</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-5600332 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="5600332" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-64f9c9f ot-flex-column-vertical" data-id="64f9c9f" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-bdab431 elementor-widget elementor-widget-iheading" data-id="bdab431" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">特征工程</h2>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-66a6a70 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="66a6a70" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-9f39673 ot-flex-column-vertical" data-id="9f39673" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-45c5af7 elementor-widget elementor-widget-text-editor" data-id="45c5af7" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>For the convenience of Machine Learning algorithms, query-document pairs are represented by numerical vectors.</div><div>Components of such vectors are called features and can be divided into different groups ( if they depend on the document, the query or both) :</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-f2c4b69 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="f2c4b69" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-c0978ce ot-flex-column-vertical" data-id="c0978ce" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-2999343 elementor-widget elementor-widget-text-editor" data-id="2999343" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><b>Document Features (query independent)</b></div><div>This kind of feature depends only on the document and not on the query.</div><div><i>e.g.</i></div><div><i>Document length</i></div><div><i>Price of the product</i></div><div><i>User Rating of the product</i></div><div> </div><div>An interesting aspect of these features is that they can be potentially precomputed in off-line mode during indexing. They may be used to compute the document’s <i>static quality score</i> (or <i>static rank</i>), which is often used to speed up search query evaluation.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-c029d80 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="c029d80" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-2e590ef ot-flex-column-vertical" data-id="2e590ef" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-e0d5881 elementor-widget elementor-widget-text-editor" data-id="e0d5881" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><b>Query Dependent Features </b></div><div>This kind of features depends on the query and on the document</div><div>e.g.</div><div><i>Is the document containing the query text in the title?</i><br/><i>Is the document (product) of the same brand as expressed in the query</i></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-a2dceca ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="a2dceca" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-a11e3bb ot-flex-column-vertical" data-id="a11e3bb" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-c8796d9 elementor-widget elementor-widget-text-editor" data-id="c8796d9" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><b>Query Level Features </b></div><div>This kind of features depends only on the query.</div><div>e.g.</div><div><i>Number of words in the query</i></div><div><i>Cuisine Type Selected( e.g. “Italian”, “Sushi” when searching for Restaurants)</i><br/><i>Date Selected ( e.g. when searching in a Hotel Booking system)</i></div><div><i>Department Selected ( e.g. “electonics”, “kitchen”, “DIY” … in an E-commerce website)</i></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-3115275 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="3115275" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-f6ecc13 ot-flex-column-vertical" data-id="f6ecc13" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-576dfd2 elementor-widget elementor-widget-text-editor" data-id="576dfd2" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><b>User Dependent Features</b></div><div>Also in this case this kind of feature does not depend on the document.</div><div>It only depends on the user running the query.</div><div><i>e.g.</i></div><div><i>Device </i></div><div><i>Age of the user</i></div><div><i>Gender</i></div><div> </div><div>As described, for convenience of the mathematical algorithms each high-level feature must be modelled as a numeric feature.</div><div>In the real world, a feature describes an aspect of the object (document) and must be represented accordingly:</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-8f13902 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="8f13902" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-5f53997 ot-flex-column-vertical" data-id="5f53997" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-c520722 elementor-widget elementor-widget-text-editor" data-id="c520722" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><b>Ordinal Features</b></div><div>An ordinal feature represents a numerical value with a certain position in a sequence of numbers.</div><div><i>e.g.</i></div><div><i>Star Rating  ( for a document describing a Hotel)</i></div><div><i>Price  ( for a document describing an e-commerce product)</i></div><div><i> </i></div><div>For the Star Rating feature, stands an order for the different values:</div><div>1&lt;2&lt;3&lt;4&lt;5  is logically correct.</div><div>For the Price feature, the same observation applies.</div><div>100$ &lt; 200$ &lt;300$</div><p> </p><div>A feature is Ordinal when it is possible to compare different values and decide the ranking of these.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-593b0fb ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="593b0fb" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-d7a49ae ot-flex-column-vertical" data-id="d7a49ae" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-f0075cf elementor-widget elementor-widget-text-editor" data-id="f0075cf" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><b>Categorical Features</b></div><div>A categorical feature represents an attribute of an object that have a set of distinct possible values.</div><div>In computer science, it is common to call the possible values of a categorical features Enumerations.</div><div><i>e.g.</i></div><div><i>Colour ( for a document describing a dress)</i></div><div><i>Country ( for a document describing a location)</i></div><div> </div><div>It easy to observe that to give an order to the values of a categorical feature does not make any sense.</div><div>For the Colour feature :</div><div>red &lt; blue &lt; black has no general meaning.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-fceb7a8 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="fceb7a8" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-c1d1169 ot-flex-column-vertical" data-id="c1d1169" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-7df09e8 elementor-widget elementor-widget-text-editor" data-id="7df09e8" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><div><b>Binary Features</b></div><div>A binary feature represents an attribute of an object that can have only two possible values.</div><div>Traditionally 0 / 1 in accordance with the binary numeral system.</div><div><i>e.g.</i></div><div><i>Is the product available? yes/no ( for a document describing an e-commerce product)</i></div><div><i>Is the colour Red? ( for a document describing a dress)</i></div><div><i>Is the country Italy ? ( for a document describing a location)</i></div></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-7152e27 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="7152e27" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-246637a ot-flex-column-vertical" data-id="246637a" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-629a6a6 elementor-widget elementor-widget-iheading" data-id="629a6a6" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">一个热编码</h4>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-8efd88f ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="8efd88f" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-d02c2bc ot-flex-column-vertical" data-id="d02c2bc" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-103aa09 elementor-widget elementor-widget-text-editor" data-id="103aa09" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">当分类特征描述您的文档时，很容易将每个类别表示为一个整数Id:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-5d9c6df ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="5d9c6df" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-fae63b6 ot-flex-column-vertical" data-id="fae63b6" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-724fb1a elementor-widget elementor-widget-text-editor" data-id="724fb1a" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><div><i>e.g.</i></div><div><i><b>Categorical Feature</b>: colour</i></div><div><i><b>Distinct Values</b>: red, green, blue</i></div><div><i><b>Representation</b> : colour:1, colour:2 colour:3 </i></div></div><div><i> </i></div><div>With this strategy, the Machine learning algorithm will be able to manage the feature values…</div><div>But is the information we pass, the same as the original one?</div><div>Representing a categorical feature as an ordinal feature is introducing an additional ordinal relationship :</div><div>1(red) &lt; 2(green) &lt; 3(blue)</div><div>which doesn’t reflect the original information.</div><div> </div><div>There are different ways to encode categorical features to make them understandable by the training algorithm. We need basically to encode the original information the feature provides in a numeric form, without any loss or addition if possible.</div><div>One possible approach is called One Hot Encoding <a href="https://web.archive.org/web/20220929234108/https://www.quora.com/What-is-one-hot-encoding-and-when-is-it-used-in-data-science" target="_blank" rel="noopener">[3]</a>:</div><div>Given a categorical feature with N distinct values, encode it in N binary features, each feature will state if the category applies to the Document.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-a5e9bfd ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="a5e9bfd" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-500fc35 ot-flex-column-vertical" data-id="500fc35" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-94009ec elementor-widget elementor-widget-text-editor" data-id="94009ec" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><i>e.g.</i></div><div><i><b>Categorical Feature</b>: colour</i></div><div><i><b>Distinct Values</b>: red, green, blue</i></div><div><i><b>Encoded Features</b> : colour_red, colour_green, colour_blue </i></div><div> </div><div>A document representing a blue shirt will be described by the following feature vector :</div><div>… colour_red:0 colour_green:0 colour_blue:1 …</div><div> </div><div>One Hot Encoding is really useful to properly model your information, but take care of the cardinality of your categorical feature as this will be reflected in the number of final features that will describe your signal.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-092424a ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="092424a" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-4b6b530 ot-flex-column-vertical" data-id="4b6b530" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-8f7a8d9 elementor-widget elementor-widget-text-editor" data-id="8f7a8d9" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><b><i>War Story 1: High Cardinality Categorical Feature</i></b></div><div>A signal describing a document with a high-level categorical feature (with N distinct values) can produce a Feature vector of length N.</div><div>This can deteriorate the performance of your trainer as it will need to manage many more features per signal.</div><div>It actually happened to me, that simply adding one categorical feature was bringing in thousands of binary features, exhausting the hardware my trainer was using,  killing the training process.</div><div> </div><div>To mitigate this, can be useful to limit the encoded distinct values only to a subset :</div><div><ul><li style="list-style-type: none;"><ul><li class="translated">白名单/黑名单方法由业务驱动</li><li class="translated">仅保留最高出现值</li><li class="translated">仅保留出现次数超过阈值的值</li><li class="translated">将其余部分编码为特殊特征:colour_misc</li><li class="translated">将不同的值散列到一组精简的散列中</li></ul></li></ul></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-b7adb84 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="b7adb84" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-bc84633 ot-flex-column-vertical" data-id="bc84633" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-311bce7 elementor-widget elementor-widget-iheading" data-id="311bce7" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">特征标准化</h4>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-88dc45a ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="88dc45a" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-9b35f1c ot-flex-column-vertical" data-id="9b35f1c" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-9a39d71 elementor-widget elementor-widget-text-editor" data-id="9a39d71" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>Feature Normalisation is a method used to standardize the range of values across different features, a technique quite useful in the data pre-processing phase.</div><div>As the majority of machine learning algorithms use the Euclidean distance to calculate the distance between two different points (training vector signals), if a feature has a widely different scales, the distance can be governed by this particular feature.</div><div>Normalizing can simplify the problem and give the same weight to each of the features involved.</div><div> </div><div>There are different type of normalization, some of them :</div><ul><li style="list-style-type: none;"><ul><li class="translated">线性归一化(基于最小值/最大值)</li><li class="translated">总和归一化(基于要素的所有值的总和)</li><li class="translated">z得分(基于特征的平均值/标准差)</li></ul></li></ul>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-adadb88 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="adadb88" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-1de732d ot-flex-column-vertical" data-id="1de732d" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-aedfd83 elementor-widget elementor-widget-iheading" data-id="aedfd83" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">特征值量化</h4>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-c1d2e94 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="c1d2e94" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-b47f46a ot-flex-column-vertical" data-id="b47f46a" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-76c9ae0 elementor-widget elementor-widget-text-editor" data-id="76c9ae0" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>Another approach to simplify the job of the training algorithm is to quantise the feature values, in order to reduce the cardinality of distinct values per feature.</div><div>It is basically the simple concept of rounding, whenever we realise that it does not make any difference for the domain to model the value with high precision, it is suggested to simplify it and round it to the acceptable level.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-9546928 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="9546928" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-2d4b683 ot-flex-column-vertical" data-id="2d4b683" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-ca7d92e elementor-widget elementor-widget-text-editor" data-id="ca7d92e" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><i>e.g.</i></div><div><i><b>Domain</b>: hospitality</i></div><div><i><b>Ranking problem</b>: Rank restaurants documents</i></div><div><i>Assuming a feature is the trip_advisor_reviews_count, is it really necessary to model the value as the precise amount of reviews? Normally would be simpler to round to the nearest k ( 250 or whatever sensible to the business)</i><br/><i><br/></i><i>Note: Extra care must be taken into account if following this approach.</i><br/><i>The reason is that adding an artificial rounding to the data can be dangerous, we can basically compromise the feature itself setting up hard thresholds.</i><br/><i>It is always better if the algorithm decides the thresholds with freedom.</i><br/><i>It is suggested were possible to not quantise, or quantise only after a deep statistical analysis on our data.</i><br/><i>If the target is to simplify the model for any reason, it is possible to evaluate at training time less threshold candidates, depending on the training algorithm.</i></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-9068ddb ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="9068ddb" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-006ad02 ot-flex-column-vertical" data-id="006ad02" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-1990d51 elementor-widget elementor-widget-iheading" data-id="1990d51" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">缺少值</h4>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-950e5d1 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="950e5d1" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-a05e2b2 ot-flex-column-vertical" data-id="a05e2b2" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-4e98c2f elementor-widget elementor-widget-text-editor" data-id="4e98c2f" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>Some of the signals we are collecting could miss some of the features ( data corruption, bug in the signal collection or simply the information was not available at the time ) .</div><div>Modelling our signals with a sparse feature vector will imply that a missing feature will actually be modelled as a feature with value 0.</div><div>This should generally be ok, but we must be careful in the case that 0 is a valid value for the feature.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-8fc9b5e ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="8fc9b5e" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-b5437c1 ot-flex-column-vertical" data-id="b5437c1" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-76b8429 elementor-widget elementor-widget-text-editor" data-id="76b8429" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><span style="color: #808080;">e.g.</span></div><div><span style="color: #808080;"><i>Given a <b>user_rating</b> feature</i></span></div><div><span style="color: #808080;"><i>A rating of 0 means the product has a very bad rating.</i></span></div><div><span style="color: #808080;"><i>A missing rating means we don’t have a rating for the product ( the product can still be really good) </i></span></div><div> </div><div><span style="color: #808080;">A first approach could be to model the 0 ratings as slightly greater than 0 (i.e. 0 + <span lang="el" xml:lang="el">ε<b> </b>) and keep the sparse representation.</span></span></div><div><span style="color: #808080;"><span lang="el" xml:lang="el">In this way, we are differentiating the information but we are still modelling the wrong ordinal relationship : </span></span></div><div> </div><div><span style="color: #808080;"><span style="font-family: sans-serif; font-size: 14px;"><span lang="el" xml:lang="el">Missing User Rating  (0) &lt; User Rating 0 (0 + </span></span><span style="font-family: sans-serif; font-size: 14px;"><span lang="el" xml:lang="el">ε</span></span><span style="font-family: sans-serif; font-size: 14px;">)</span></span></div><div><span style="color: #808080; font-family: sans-serif; font-size: 14px;"> </span></div><div><span style="color: #808080;">Unfortunately, at least for the RankLib implementation, a missing feature will always be modelled with a value 0, this, of course, will vary from algorithm to algorithm.</span></div><div><span style="color: #808080;">But we can enforce the learning a bit, adding an additional binary feature that states that the User Rating is actually missing :</span></div><div> </div><div><span style="color: #808080;"><span style="font-size: 14.166666030884px;">user_rating:0 , user_rating_missing:1 .</span></span></div><div> </div><div><span style="color: #808080;">This should help the learning process to actually understand better the difference.</span><br/><span style="color: #808080;">Furthermore, if possible we can help the algorithm, avoiding the sparse representation if necessary and setting for the missing feature a value which is the avg of the feature itself across the different samples.</span></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-0af8175 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="0af8175" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-690f722 ot-flex-column-vertical" data-id="690f722" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-c600e14 elementor-widget elementor-widget-iheading" data-id="c600e14" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">极端值</h4>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-6a7ce5e ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="6a7ce5e" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-812808c ot-flex-column-vertical" data-id="812808c" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-4883374 elementor-widget elementor-widget-text-editor" data-id="4883374" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>Some of the signals we are collecting could have some outliers ( some signal with an unlikely extremely different value for a specific feature).</div><div>This can be caused by bugs in the signal collection process or simply the anomaly can be a real instance of a really rare signal.</div><div>Outliers can complicate the job of the model training and can end up in overfitting models that have difficulties in adaptation for unknown datasets.</div><div>Identify and resolve anomalies can be vitally important if your dataset is quite fragile.</div><div> </div><div>Tool for data visualisation can help in visualising outliers, but for a deep analysis I suggest to have a read of this interesting blog post<a href="https://web.archive.org/web/20220929234108/https://machinelearningmastery.com/how-to-identify-outliers-in-your-data/" target="_blank" rel="noopener"> [4]</a>.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-db8a94e ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="db8a94e" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-7be1788 ot-flex-column-vertical" data-id="7be1788" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-911d466 elementor-widget elementor-widget-iheading" data-id="911d466" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">特征定义</h4>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-a22af00 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="a22af00" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-d97e5cc ot-flex-column-vertical" data-id="d97e5cc" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-b9225f8 elementor-widget elementor-widget-text-editor" data-id="b9225f8" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>Defining the proper set of features to describe the document of our domain is an hard task.</div><div>It is not easy to identify in the first place all the relevant features even if we are domain experts, this procedure will take time and a lot of trial and error.</div><p>

</p><div>Let’s see a guideline to try to build a feature vector as best as possible :</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-6afa606 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="6afa606" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-0d632e2 ot-flex-column-vertical" data-id="0d632e2" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-3f3f34b elementor-widget elementor-widget-text-editor" data-id="3f3f34b" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<ul><li style="list-style-type: none;"><ul><li class="translated"><b>保持简单</b>:从一组有限的特征开始，这些特征是描述你的问题的真正基础，产生的模型会很差，但至少你有基线。</li><li class="translated"><b>迭代训练模型:</b>每次执行时删除或添加一个特征。这很费时间，但可以让你清楚地识别哪些功能真正重要。</li><li class="translated"><b>可视化重要特征</b>:训练完模型后，使用可视化工具验证哪个特征出现得更多</li><li class="translated"><b>与业务部门会面</b>:与业务部门会面，比较他们期望看到的重新排序和模型实际重新排序的内容。当有不一致时，让人类来解释为什么，这应该驱动去识别缺失的特征或以错误的意义使用的特征。</li></ul></li></ul>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-74e8995 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="74e8995" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-d5b3e68 ot-flex-column-vertical" data-id="d5b3e68" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-2ac7f71 elementor-widget elementor-widget-iheading" data-id="2ac7f71" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">数据准备</h2>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-c8860a2 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="c8860a2" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-2ea1168 ot-flex-column-vertical" data-id="2ea1168" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-00863fc elementor-widget elementor-widget-text-editor" data-id="00863fc" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">我们仔细设计了领域文档的矢量表示，确定了信号的来源，建立了训练集。<br/>到目前为止，一切顺利……<br/>但是模特的表现仍然很差。<br/>在这种情况下，原因有很多:</p><ul><li style="list-style-type: none;"><ul><li class="translated">信号质量差(噪音)</li><li class="translated">不完全特征向量表示</li><li class="translated">每个查询的相关-不相关文档分布不均匀</li></ul></li></ul><p class="translated">让我们探索一些准则来克服这些困难:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-7588c30 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="7588c30" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-e07ba9b ot-flex-column-vertical" data-id="e07ba9b" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-430619a elementor-widget elementor-widget-iheading" data-id="430619a" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">噪声消除</h4>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-7b9f095 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="7b9f095" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-2262a71 ot-flex-column-vertical" data-id="2262a71" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-bfc91fc elementor-widget elementor-widget-text-editor" data-id="bfc91fc" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>In the scenario of implicit signals, it is likely we model the relevancy rating based on an evaluation metric of the user engagement with the document given a certain query.</div><p> </p><div>Depending of the domain we can measure the user engagement in different ways.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-dd349f3 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="dd349f3" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-5979e42 ot-flex-column-vertical" data-id="5979e42" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-3da3f97 elementor-widget elementor-widget-text-editor" data-id="3da3f97" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>Let’s see an example for a specific domain :  <b>E-commerce</b></div><div>We can assign the relevancy rating of each signal depending on the user interaction :</div><div>Given a scale 1 to 3 :</div><div style="padding-left: 40px;"><b>1</b> – User clicked the product</div><div style="padding-left: 40px;"><b>2</b> – User added the product to the basket</div><div style="padding-left: 40px;"><b>3</b> – User bought the product</div><div>The simplest approach would be to store 1 signal per user interaction.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-62716e9 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="62716e9" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-7ac4e21 ot-flex-column-vertical" data-id="7ac4e21" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-47899ab elementor-widget elementor-widget-text-editor" data-id="47899ab" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>User behavioural signals are noisy by nature, but this approach introduces even more noise, as for the same feature vector we introduce discordant signals, specifically we are telling the training algorithm that given that feature vector and that query, the document is at the same time :</div><div>vaguely relevant – relevant – strongly relevant .</div><div>This doesn’t help the training algorithm at all, so we need to find a strategy to avoid that.</div><div>One possible way is to keep only the strongest signal per document-query per user episode .</div><div>In the case of a user buying a product, we avoid storing in the training set 3 signals, but we keep only the most relevant one.</div><div>In this way we transmit to the training algorithm the only the important information for the user interaction with no confusion.</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-b7607bf ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="b7607bf" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-135c515 ot-flex-column-vertical" data-id="135c515" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-cc331f9 elementor-widget elementor-widget-iheading" data-id="cc331f9" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">不平衡数据集</h4>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-cce6691 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="cce6691" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-d7cb846 ot-flex-column-vertical" data-id="d7cb846" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-280b686 elementor-widget elementor-widget-text-editor" data-id="280b686" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>In some domain, would be quite common to have a very unbalanced dataset.</div><div>A dataset is unbalanced when the relevancy classes are not represented equally in the dataset i.e. we have many more samples of a relevancy class than another.</div><div>Taking again the E-commerce example, the number of relevant signals (sales) will be much less than the number of weak signals (clicks).</div><div>This unbalance can make the life harder to the training algorithm, as each relevant signal can be covered by many more weakly relevant ones.</div><p> </p><div>Let’s see how we can manipulate the dataset to partially mitigate this problem :</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-4519379 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="4519379" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-a15ce48 ot-flex-column-vertical" data-id="a15ce48" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-080441d elementor-widget elementor-widget-text-editor" data-id="080441d" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<h6 class="translated">收集更多数据</h6><div>This sounds simple, but collecting more data is generally likely to help.</div><div>Of course there are domain when collecting more data is not actually beneficial ( for example when the market change quite dinamically and the previous years dataset becomes almost irrelevant for predicting the current behaviours ) .</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-e971e13 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="e971e13" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-0080b32 ot-flex-column-vertical" data-id="0080b32" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-af46088 elementor-widget elementor-widget-text-editor" data-id="af46088" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<h6 class="translated">对数据集进行重新采样</h6>
<div>
<div>You can manipulate the data you collected to have more balanced data.</div>
<div>This change is called sampling your dataset and there are two main methods that you can use to even-up the classes: Oversampling and Undersampling <a href="https://web.archive.org/web/20220929234108/https://en.wikipedia.org/wiki/Oversampling_and_undersampling_in_data_analysis" target="_blank" rel="noopener">[5]</a><span style="color: var( --e-global-color-text ); font-weight: var( --e-global-typography-text-font-weight );">.</span></div>
<div> </div>
<div>You can add copies of instances from the under-represented relevancy class, this is called over-sampling, or</div>
<div>you can delete instances from the over-represented class, this technique is called under-sampling.</div>
<div>These approaches are often very easy to implement and fast to run. They are an excellent starting point.</div>
</div>
<div> </div>
<div>Some ideas and suggestion :</div>
<div>
<div>
<ul>
<li style="list-style-type: none;">
 
<ul>
<li class="translated">当您有大量数据(数万或数十万个实例或更多)时，可以考虑欠采样测试，您可以随机欠采样或遵循任何可用的业务逻辑</li>
<li class="translated">考虑测试不同的重采样比率(没有必要以1:1的比率为目标)</li>
<li class="translated">当过采样考虑先进的方法，而不是简单的复制已经存在的样本时，人工产生新的样本可能是好的</li>
</ul>
</li>
</ul>
<p class="translated">请注意，重采样并不总是有助于您的训练算法，因此请使用您的用例进行详细实验。</p>
</div>
</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-33f139c ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="33f139c" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-c1362d1 ot-flex-column-vertical" data-id="c1362d1" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-ec3ca03 elementor-widget elementor-widget-text-editor" data-id="ec3ca03" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><b><i>War Story 2: Oversampling by duplication</i></b></div><div><i>Given a dataset highly unbalanced, the model trained was struggling to predict accurately the desired relevancy class for document-query test samples.</i></div><div><i>Oversampling was a tempting approach, so here we go!</i></div><div><i> </i></div><div><i>As I am using cross validation, the first approach has been to oversample the dataset by duplication.</i></div><div><i>I took each relevancy class and duplicate the samples until I built a balanced dataset.</i></div><div><i>Then started the training in Cross Validation and I trained a model which was immense and almost perfectly able to predict the relevancy of validation and test samples.</i></div><div><i>Cool ! I got it !</i></div><div><i>Actually was not an amazing result at all, because of course applying cross validation on an oversampled dataset built validation and test sets oversampled as well.</i></div><div><i>This means that it was really likely that a sample in the training set was appearing exactly the same in the validation set and in the test set.</i></div><div><i>The resulting model was basically highly overfitted and not that good to predict unknown test sets.</i></div><div><i> </i></div><div><i>So I moved to a manual training set- validation set – test set split and oversampled only the training set.</i></div><div><i>This was definitely better and built a model that was much more suitable.</i></div><div><i>It was not able to perfectly predict validation and test sets but this was a good point as the model was able to predict unknown data sets better.</i></div><div><i> </i></div><div><i>Then I trained again, this time the original dataset, manually split as before but not oversampled.</i></div><div><i>The resulting model was actually better than the oversampled one.</i></div><div><i>One of the possible reasons is that the training algorithm and model I was using (LambdaMART) didn’t get any specific help from the resampling, actually the model lost the capability of discovering which samples were converting better ( strong relevant signals : weak relevant signals ratio).</i></div><div><i>Practically I favoured the volume over the conversion ratio, increasing the recall but losing the precision of the ranker.</i></div><div><i> </i></div><div><i style="color: var( --e-global-color-text ); font-weight: var( --e-global-typography-text-font-weight );"><b>Conclusion</b> : Experiment, evaluate the approach with your algorithm, compare, don’t assume it is going to be better without checking</i></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-a9a3c3f ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="a9a3c3f" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-727e02c ot-flex-column-vertical" data-id="727e02c" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-51cc5f1 elementor-widget elementor-widget-iheading" data-id="51cc5f1" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">查询Id哈希</h4>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-7213639 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="7213639" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-6fc6d07 ot-flex-column-vertical" data-id="6fc6d07" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-485d1ca elementor-widget elementor-widget-text-editor" data-id="485d1ca" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div>As we have seen in the initial part of the blog, each sample is a document-query pair, represented in a vectorial format.</div><div>The query is represented by an Id, this Id is used to group samples for the same query, and evaluate the ranker performance over each samples group.</div><div>This can give us an evaluation of how good the ranker is performing on average on all the queries of interest.</div><div>This brings to carefully decide how we generate the query identifier.</div><div> </div><div>If we generate a <b>too specific hash</b>, we risk to build small groups of samples, this small groups can get an high score when ranking them, biased by their small size.</div><div><i>Extreme case</i></div><div><i>e.g.</i></div><div><i>Really specific hash, brings many groups to be 1 sample groups.</i></div><div><i>This brings up the evaluation metric score, as we are averaging and a lot of groups, being of size 1, are perfectly easy to rank.</i></div><div> </div><div>If we generate an hash that is not specific enough we can end up in immense groups, not that helpful to evaluate our ranking model on the different real world scenarios.</div><div>The ideal scenario is to have one query Id per query category of interest, with a good number of samples related, this would be the perfect dataset, in this way we can validate both :</div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-f80f08f ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="f80f08f" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-9f590f5 ot-flex-column-vertical" data-id="9f590f5" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-305696a elementor-widget elementor-widget-text-editor" data-id="305696a" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<div><ul><li style="list-style-type: none;"><ul><li class="translated">组内相关性(因为组由足够的样本组成)</li><li class="translated">查询的平均值(因为我们有一组有效的不同查询可用)</li></ul></li></ul></div><div>The query category could depend on a set of Query Dependent Features, this means that we can calculate the hash using the values of these features.</div><div>Being careful we maintain a balance between the group sizes and the granularity of the hash.</div><div>It is important to have the query categories across the training/validation/test set :</div><div><i>e.g.</i></div><div><i>We have 3 different query categories , based on the value of a user dependent feature ( user_age_segment) .</i></div><div><i>These age segments represents three very different market segments, that require very different ranking models.</i></div><div><i>When building our training set we want enough samples for each category and we want them to be split across the training/validation/test sets to be able to validate how good we are in predicting the different market segment.</i></div><div><i>This can potentially drive to build separate models and separate data sets if it is the case.</i></div>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-599ec278 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="599ec278" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-252b80fd ot-flex-column-vertical" data-id="252b80fd" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-367b98ae elementor-widget elementor-widget-iheading" data-id="367b98ae" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>// our service</span>
	        <h2 class="main-heading translated">不要脸的塞给我们培训和服务！</h2>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-675e42b8 elementor-widget elementor-widget-text-editor" data-id="675e42b8" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">我提到过我们做<a href="https://web.archive.org/web/20220929234108/https://sease.io/training/apache-solr-training/apache-solr-beginner-training"> Apache Solr初学者</a>和<a href="https://web.archive.org/web/20220929234108/https://sease.io/training/learning-to-rank-training">学习排名</a>培训吗？<br/>我们还提供关于这些主题的咨询，<a href="https://web.archive.org/web/20220929234108/https://sease.io/contacts">如果您想让您的搜索引擎更上一层楼，请联系</a>！</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-86428db ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="86428db" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-27fc5c1 ot-flex-column-vertical" data-id="27fc5c1" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-5acd93f elementor-widget elementor-widget-iheading" data-id="5acd93f" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>// STAY ALWAYS UP TO DATE</span>
	        <h2 class="main-heading translated">订阅我们的时事通讯</h2>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-7cf4600 elementor-widget elementor-widget-text-editor" data-id="7cf4600" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">你喜欢这篇关于学习Apache Solr排名的文章吗？不要忘记订阅我们的时事通讯，以便随时了解信息检索世界的最新动态！</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-eec0ea7 elementor-widget elementor-widget-wp-widget-mc4wp_form_widget" data-id="eec0ea7" data-element_type="widget" data-widget_type="wp-widget-mc4wp_form_widget.default">
				<div class="elementor-widget-container">
			<script>(function() {
	window.mc4wp = window.mc4wp || {
		listeners: [],
		forms: {
			on: function(evt, cb) {
				window.mc4wp.listeners.push(
					{
						event   : evt,
						callback: cb
					}
				);
			}
		}
	}
})();
</script><!-- Mailchimp for WordPress v4.8.8 - https://wordpress.org/plugins/mailchimp-for-wp/ --><form id="mc4wp-form-1" class="mc4wp-form mc4wp-form-1343" method="post" data-id="1343" data-name="Sease Mailchimp"><div class="mc4wp-form-fields">
<div class="subscribe-inner-form">
	<input type="email" name="EMAIL" placeholder="Your Email" required=""/>
	<button type="submit" class="subscribe-btn-icon"><i class="flaticon-telegram"/></button>
</div>	

<p class="translated"><label> <input name="AGREE_TO_TERMS" type="checkbox" value="1" required=""/> <a href="https://web.archive.org/web/20220929234108/https://sease.io/privacy-policy" target="_blank">我已经阅读并同意隐私政策</a> </label></p></div><label style="display: none !important;">Leave this field empty if you're human: <input type="text" name="_mc4wp_honeypot" value="" tabindex="-1" autocomplete="off"/></label><input type="hidden" name="_mc4wp_timestamp" value="1664494867"/><input type="hidden" name="_mc4wp_form_id" value="1343"/><input type="hidden" name="_mc4wp_form_element_id" value="mc4wp-form-1"/><div class="mc4wp-response"/></form><!-- / Mailchimp for WordPress Plugin -->		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
									    
</body>
</html>