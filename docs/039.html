<html>
<head>
<title>Apache Solr Atomic Updates: a Polymorphic Approach</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Apache Solr原子更新:多态方法</h1>
<blockquote>原文：<a href="https://web.archive.org/web/sease.io/2020/01/apache-solr-atomic-updates-polymorphic-approach.html#0001-01-01">https://web.archive.org/web/sease.io/2020/01/apache-solr-atomic-updates-polymorphic-approach.html#0001-01-01</a></blockquote>
									<section class="elementor-section elementor-top-section elementor-element elementor-element-ab5b13c ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="ab5b13c" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-ba0ccc2 ot-flex-column-vertical" data-id="ba0ccc2" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-1c2751f elementor-widget elementor-widget-text-editor" data-id="1c2751f" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">在这篇文章中，我们描述了一种解决应用程序需要完全更新和原子更新问题的方法，使用了面向对象编程中一个强大的概念:<strong>多态</strong>。</p>
<p class="translated">在面向对象编程中，多态性指的是一个变量、方法或对象采取多种形式的能力。</p>
<p class="translated">尽管为了提供高水平的视角，已经对示例上下文进行了抽象，但是所描述的方法的实际应用已经在<strong>户外搜索服务</strong><a href="https://web.archive.org/web/20220925175711/https://github.com/Alfresco/SearchServices">【1】</a>中实现。</p>
<p class="translated">【T6<!-- /wp:paragraph --><!-- wp:paragraph --><!-- /wp:paragraph --><!-- wp:paragraph --><!-- /wp:paragraph --><!-- wp:paragraph --><!-- /wp:paragraph --></p>
<p class="translated"><strong> Alfresco搜索服务</strong>通过利用<strong> Apache Solr </strong>为<strong> Alfresco内容服务</strong>提供搜索功能。企业版和社区版的Alfresco内容服务都使用它。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-aac1b17 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="aac1b17" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-43946bc ot-flex-column-vertical" data-id="43946bc" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-f71683f elementor-widget elementor-widget-iheading" data-id="f71683f" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">语境</h2>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-ddbb6cb ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="ddbb6cb" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-671feb9 ot-flex-column-vertical" data-id="671feb9" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-4826ffc elementor-widget elementor-widget-text-editor" data-id="4826ffc" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><strong>现有代码</strong>从传入的数据模型中创建<em> SolrInputDocument </em>实例。文档一旦创建，就被发送到Solr进行索引。<br/>每个文档代表<strong>一个域对象的完整状态</strong>:也就是说第一次发送的时候会被<strong>插入</strong>；下一次发送相同的文件(即具有相同id的文件)时，<strong>会替换</strong>现有文件。</p>
<p class="translated"><!-- wp:paragraph -->T33<!-- wp:paragraph -->T35】</p>
<p class="translated">这是系统的核心部分，逻辑相当复杂:在几个地方创建了一个<em> SolrInputDocument </em>实例，并传递了许多方法，这些方法用一组特定的属性来丰富它。大概是这样的:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-5ce2e20 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="5ce2e20" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-9ae4cf6 ot-flex-column-vertical" data-id="9ae4cf6" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-781f97b elementor-widget elementor-widget-text-editor" data-id="781f97b" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;"><span style="white-space: pre-wrap;">public void indexScenario1(DomainObject o) {
    SolrInputDocument doc = new SolrInputDocument();

    ...

    addAttributeSetA(doc, Domain);
    addAttributeSetB(doc, Domain);

    if (something) 
       addAttributeSetC(doc, Domain);
    else
       addAttributeSetD(doc, Domain);
    ...  </span></pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-7a35031 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="7a35031" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-716fa90 ot-flex-column-vertical" data-id="716fa90" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-b4f2f07 elementor-widget elementor-widget-iheading" data-id="b4f2f07" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">挑战</h2>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-4f401bd ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="4f401bd" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-443ffc3 ot-flex-column-vertical" data-id="443ffc3" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-9d972a3 elementor-widget elementor-widget-text-editor" data-id="9d972a3" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p style="margin-bottom: 20px; color: #6d6d6d;" class="translated">在我们的贡献下，创建领域模型实例的系统部分有了一点改变:主要的改进包括使用<strong>“delta”对象</strong>的额外能力。换句话说，调用者代码能够向该索引组件提供“完整”或“部分”域对象(即，仅包含已更新内容的域对象)。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-675ab1b ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="675ab1b" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-ed62fd5 ot-flex-column-vertical" data-id="ed62fd5" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-31ef9d7 elementor-widget elementor-widget-iheading" data-id="31ef9d7" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">限制</h2>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-51769d8 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="51769d8" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-55765bb ot-flex-column-vertical" data-id="55765bb" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-6be6918 elementor-widget elementor-widget-text-editor" data-id="6be6918" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">到目前为止，你认为这是一个完美的适合使用<strong>原子更新</strong>！绝对正确:只包含更改位的域对象可以在<strong>partial</strong><em>SolrInputDocument</em>实例中转换，然后发送到Solr进行索引。</p>
<p class="translated">然而，一个<strong>第一约束</strong>需要被解决:部分对象<strong>不会是一个独占场景，我们仍然必须处理完整对象</strong>。</p>
<p class="translated"><strong>第二个约束</strong>:如上所述，索引组件代表了系统的中心/关键部分，因此即使是<strong>最小的变更</strong>也会带来一定程度的风险，因此代码变更应该被最小化。</p>
<p class="translated"><!-- /wp:paragraph --> <!-- wp:paragraph --> <!-- /wp:paragraph --> <!-- wp:paragraph --> <!-- /wp:paragraph --> <!-- wp:paragraph --> <!-- /wp:paragraph --></p>
<p class="translated">根据我们的经验，这需要一种“改变越少越好”的方法，而旧的好的<strong>面向对象编程</strong>在这方面绝对很棒！</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-29a4f98 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="29a4f98" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-6e83bdd ot-flex-column-vertical" data-id="6e83bdd" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-1aec93c elementor-widget elementor-widget-iheading" data-id="1aec93c" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">什么是原子更新？</h2>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-697c19e ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="697c19e" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-8e1cdcc ot-flex-column-vertical" data-id="8e1cdcc" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-3452bde elementor-widget elementor-widget-text-editor" data-id="3452bde" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">原子更新<a href="https://web.archive.org/web/20220925175711/https://lucene.apache.org/solr/guide/6_6/updating-parts-of-documents.html">【2】</a>是一种使用<strong>“更新”语义</strong>在客户端执行索引命令的方式，通过应用/索引表示域对象的<strong>部分状态的文档。</strong></p>
<p class="translated">因此，实际上，使用<strong>原子更新</strong>，客户端能够<strong>只发送“部分”文档</strong>，该文档只包含需要应用于现有(即先前索引的)文档的更新。</p>
<p class="translated"><!-- wp:paragraph -->T25<!-- wp:paragraph -->T27<!-- wp:paragraph -->T29】</p>
<p class="translated">让我们看一个例子。索引以下文档后:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-7a4c720 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="7a4c720" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-f85c922 ot-flex-column-vertical" data-id="f85c922" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-b720166 elementor-widget elementor-widget-text-editor" data-id="b720166" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;"><span style="white-space: pre-wrap;">{
   "id": 1
   "title": "Design Patterns: Elements of Reusable Object-Oriented Software",
   "author": [
      "Erich Gamma",
      "Richard Helm",
      "Ralph Jonson"
   ]
}      </span></pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-c06a6dd ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="c06a6dd" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-f401d1b ot-flex-column-vertical" data-id="f401d1b" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-3ffdc7b elementor-widget elementor-widget-text-editor" data-id="3ffdc7b" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">你意识到“拉尔夫·约翰逊”中少了一个“h”(啊！误认这样一个古鲁的名字:不可接受！);另外，你忘了约翰·弗利塞斯……真是一场灾难！</p>
<p class="translated">所以你可以做下面两件事之一。</p>
<p class="translated"><!-- wp:paragraph --> <!-- /wp:paragraph --> <!-- wp:paragraph --> <!-- /wp:paragraph --> <!-- wp:paragraph --> <!-- /wp:paragraph --></p>
<p class="translated">通常的方法是<strong>重新创建整个文档</strong>而不出错，并将其重新发送给Solr:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-3a6b9a3 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="3a6b9a3" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-0bf5784 ot-flex-column-vertical" data-id="0bf5784" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-edfa7bb elementor-widget elementor-widget-text-editor" data-id="edfa7bb" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;">{
  "id":1
  "title":"Design Patterns: Elements of Reusable Object-Oriented Software",
  "author":[
      "Erich Gamma",
      "Richard Helm",
      "Ralph Johnson",
      "John Vlissides"
  ]
}      <br/></pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-1d1182d ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="1d1182d" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-f08c13e ot-flex-column-vertical" data-id="f08c13e" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-027d1c4 elementor-widget elementor-widget-text-editor" data-id="027d1c4" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">那个新文档完全用<strong>替换了索引的文档</strong>(注意:隐含的假设是<em> uniqueId </em>字段是“Id”)。</p>
<p class="translated"><!-- wp:paragraph --> <!-- /wp:paragraph --> <!-- wp:paragraph --> <!-- /wp:paragraph --></p>
<p class="translated">另一种方式允许我们只发送我们想在现有文档上更改的内容。在这种情况下，我们将向Solr发送这样一个文档:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-4686a75 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="4686a75" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-c9000a1 ot-flex-column-vertical" data-id="c9000a1" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-8ab47e0 elementor-widget elementor-widget-text-editor" data-id="8ab47e0" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;">{
  "id": 1
  "author": {
     "remove": "Ralph Jonson",
     "add": ["Ralph Johnson", "John Vlissides"]
  }
}    </pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-160c884 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="160c884" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-bfa35f6 ot-flex-column-vertical" data-id="bfa35f6" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-135304d elementor-widget elementor-widget-text-editor" data-id="135304d" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">它将把id=1的索引文档作为目标</p>
<ul>
<li class="translated">它<strong>去掉</strong> s错误的值(“拉尔夫·琼森”)</li>
<li class="translated">它为作者添加了正确的值(“拉尔夫·乔”</li>
<li class="translated">这是另一个失踪的作者</li>
</ul>
<p class="translated">如你所见，需要更新的字段的值不再是文字 <strong>值</strong>(如字符串、整数)或值列表；相反，我们有一个映射图<strong/>,其中<strong>键</strong>是我们想要应用的<strong>更新命令</strong>(例如，删除、添加、设置),而<strong>值</strong>是我们想要用于更新的一个或多个文字值<strong>。</strong></p>
<p class="translated">关于<strong> AtomicUpdates </strong>的完整语义的更多信息可以在<strong> Apache Solr参考指南</strong> [2]中找到:这里需要记住的是Solr方面，在幕后没有发生“真正的”部分更新:旧版本的文档是<strong>获取的</strong>，它是<strong>合并了</strong>和<strong>部分状态</strong>；之后，新的“完整”结果文档被再次索引<strong/>。</p>
<p class="translated">尽管如此，它还是非常有益的，因为当你需要更新文档时，它减少了你可能转移到Solr的数据量。</p>
<p class="translated">在<strong> Java </strong>中，特别是在<strong> SolrJ </strong>中，<em> SolrInputDocument </em>类表示我们发送给Solr用于索引的数据。这基本上是一个映射，所以我们可以添加，设置或删除字段和值。</p>
<p class="translated"><!-- wp:paragraph --><!-- /wp:paragraph --><!-- wp:list --><!-- /wp:list --><!-- wp:paragraph --><!-- /wp:paragraph --><!-- wp:paragraph --><!-- /wp:paragraph --><!-- wp:paragraph --><!-- /wp:paragraph --><!-- wp:paragraph --><!-- /wp:paragraph --><!-- wp:paragraph --><!-- /wp:paragraph --></p>
<p class="translated">我们对以下三种方法感兴趣:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-c4bf69b ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="c4bf69b" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-6e36a6e ot-flex-column-vertical" data-id="6e36a6e" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-ec4ea28 elementor-widget elementor-widget-text-editor" data-id="ec4ea28" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;">// If a field with that name doesn’t exist it adds a new entry with the 
// corresponding value, otherwise the value is collected together with 
// the existing value(s)
// This is typically used on multivalued fields (i.e. calling twice this
// method on the same field, will collect 2 xvalues for that field)  
addField(String name, Object value)     

// Sets/Replaces a field value
setField(String name, Object value)     

// Remove a field from the document
removeField(String name, Object value)</pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-b5904a2 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="b5904a2" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-a9d8997 ot-flex-column-vertical" data-id="a9d8997" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-6c32874 elementor-widget elementor-widget-text-editor" data-id="6c32874" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><strong>同类</strong>也用于表示<strong>部分文档</strong>。您可以通过在<em> setField </em>或<em> addField </em>方法中设置map as值来实现。贴图可以有一个或多个修改器:</p>
<ul>
<li style="list-style-type: none;">
 
<ul>
<li class="translated"><strong>“add”</strong>:将指定值添加到多值字段中。</li>
<li class="translated"><strong>“删除”</strong>:从多值字段中删除指定值的所有匹配项。</li>
<li class="translated"><strong> "set" </strong>:用指定的值设置或替换字段值，如果新值指定为' null '或空列表，则删除这些值。</li>
</ul>
</li>
</ul>
<p class="translated"><!-- wp:paragraph --><!-- /wp:paragraph --><!-- wp:list --><!-- /wp:list --><!-- wp:paragraph -->T51】</p>
<p class="translated">注意还有两个额外的修饰符(inc，removeregex ),但是我们在这个上下文中对它们不感兴趣。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-8da636d ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="8da636d" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-6311a1e ot-flex-column-vertical" data-id="6311a1e" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-0d82d8f elementor-widget elementor-widget-iheading" data-id="0d82d8f" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">这个想法</h2>	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-742f0b2 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="742f0b2" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-3b7f339 ot-flex-column-vertical" data-id="3b7f339" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-25ea603 elementor-widget elementor-widget-text-editor" data-id="25ea603" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">记住我们上面的约束:</p>
<ul>
<li style="list-style-type: none;">
 
<ul>
<li class="translated">现有代码总是做<strong>全文档更新</strong></li>
<li class="translated">在调用者端已经实现了一个变化:<strong>传入的域对象</strong>将会是<strong>完全的或者部分的</strong>，这取决于用例</li>
<li class="translated">Solr文档实例价值化<strong>跨越了许多方法</strong>。创建一个<em> SolrInputDocument </em>实例，然后传递给几个设置文档状态的方法。</li>
<li class="translated">我们需要<strong>部分更新</strong>，但它们<strong>不会是唯一的场景</strong>:在某些情况下，我们仍然有<strong>完全更新</strong></li>
</ul>
</li>
</ul>
<p class="translated"><!-- wp:paragraph --> <!-- /wp:paragraph --> <!-- wp:list --> <!-- /wp:list --> <!-- wp:paragraph --> <!-- /wp:paragraph --></p>
<p class="translated">在Java中实现到目前为止描述的部分更新机制要求方法<em> addField </em>、<em> setField </em>或<em> removeField </em>知道它们的执行上下文(部分或完全更新)。因为在完全更新的情况下，添加一个新的作者会很简单</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-4cf9abf ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="4cf9abf" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-dfff02b ot-flex-column-vertical" data-id="dfff02b" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-03c4d32 elementor-widget elementor-widget-text-editor" data-id="03c4d32" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;">doc.addField(“author”, “Ralph Johnson”);  </pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-6547d00 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="6547d00" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-b7bfbb5 ot-flex-column-vertical" data-id="b7bfbb5" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-771e694 elementor-widget elementor-widget-text-editor" data-id="771e694" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">而在<strong>部分更新</strong>时，有必要考虑<strong>第一次</strong>发生添加时的差异:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-163437d ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="163437d" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-ead1ef6 ot-flex-column-vertical" data-id="ead1ef6" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-91011cd elementor-widget elementor-widget-text-editor" data-id="91011cd" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;">List&lt;String&gt; authors = new ArrayList();
authors.add(“Ralph Johnson”);
doc.addField(“author”,  new HashMap() {{ “add”, authors}};</pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-3c8d7b9 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="3c8d7b9" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-e156f44 ot-flex-column-vertical" data-id="e156f44" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-2ff2d3e elementor-widget elementor-widget-text-editor" data-id="2ff2d3e" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">从随后的时间:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-94a568d ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="94a568d" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-bbba785 ot-flex-column-vertical" data-id="bbba785" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-a3e87d1 elementor-widget elementor-widget-text-editor" data-id="a3e87d1" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;">Map&lt;String, Object&gt; fieldModifier = 
            (Map&lt;String,Object&gt;)doc.getFieldValue(“author);

List&lt;String&gt; authors = (List&lt;String&gt;) fieldModifier.get(“add”);
authors.add(“John Vlissides”);</pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-1ef4d38 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="1ef4d38" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-8d6c4a7 ot-flex-column-vertical" data-id="8d6c4a7" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-a8d32e7 elementor-widget elementor-widget-text-editor" data-id="a8d32e7" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">上面的逻辑(可以写得更好)需要为每个添加/设置/删除调用的字段完成！有没有更好的处理方法？是的，当然:</p>
<p class="translated"><!-- wp:paragraph -->T12<!-- wp:paragraph -->T14】</p>
<p class="translated">创建<em> SolrInputDocument </em>的子类:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-12c0676 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="12c0676" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-172c720 ot-flex-column-vertical" data-id="172c720" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-6645a8c elementor-widget elementor-widget-text-editor" data-id="6645a8c" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;">public class PartialSolrInputDocument extends SolrInputDocument {
     static Function&lt;String, List&lt;Object&gt;&gt; LAZY_EMPTY_MUTABLE_LIST = 
                key -&gt; new ArrayList&lt;&gt;();

     @Override
     @SuppressWarnings("unchecked")
     public void addField(String name, Object value) {
         Map&lt;String, List&lt;Object&gt;&gt; fieldModifier =
                 (Map&lt;String, List&lt;Object&gt;&gt;)computeIfAbsent(name, k -&gt; {
                     remove(name);
                     setField(name, newFieldModifier("add"));

                     return getField(name);
                 }).getValue();

        ofNullable(value)
             .ifPresent(v -&gt; 
                      fieldModifier.computeIfAbsent(
                                fieldModifier
                                  .keySet()
                                  .iterator()
                                  .next(),
                                LAZY_EMPTY_MUTABLE_LIST).add(v));
     }

     @Override
     public SolrInputField removeField(String name) {
        setField(name, newFieldModifier("set"));
        return getField(name);
     }

     private Map&lt;String, List&lt;String&gt;&gt; newFieldModifier(String op) {
        return new HashMap&lt;&gt;()
        {{
           put(op, null);
        }};
     }
}</pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-373d768 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="373d768" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-09eda3e ot-flex-column-vertical" data-id="09eda3e" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-84893b7 elementor-widget elementor-widget-text-editor" data-id="84893b7" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">这个类的逻辑可以总结如下:</p>
<ul>
<li style="list-style-type: none;">
 
<ul>
<li class="translated"><strong> setField </strong>:保持原来的语义:调用此方法将替换任何现有的值</li>
<li class="translated"><strong> removeField </strong>:部分文档上的removeField表示“嘿，我想从索引文档中删除任何现有的值”。这种语义在原子更新中使用带有空值的<strong>“设置”修饰符</strong>来实现</li>
<li class="translated"><strong> addField </strong>:这里的逻辑根据调用“removeField”之前是否发生(在给定的字段上)而改变。<ul>
<li class="translated">如果字段X发生了一个<em> removeField </em>，它与一个<strong>“set”修饰符</strong>和一个<strong>空值</strong>相关联。然后调用“addField ”,添加的值填充与“set”修饰符相关联的列表。换句话说，意思是“Solr，取这个字段定义，用它替换索引文档中的现有值”。</li>
<li class="translated">否则(字段X没有发生<em>remove field</em>):<em>add field</em>在<strong>“add”字段修饰符</strong>中收集一组值。换句话说，收集的值<strong>被添加</strong>到索引文档中的现有值。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="translated">使用这种方法，问题:<strong>我们应该使用完全更新还是部分更新？</strong>在对象构建时<strong>是否解决。</strong></p>
<p class="translated"><!-- wp:paragraph --><!-- /wp:paragraph --><!-- wp:list --><!-- /wp:list --><!-- wp:paragraph --><!-- /wp:paragraph --><!-- wp:paragraph --><!-- /wp:paragraph --></p>
<p class="translated">让我们看一个例子。下面是一个现有的方法，它使用一个输入<em> SolrInputDocument </em>实例，并向多值字段“author”添加一个新名称:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-84bf717 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="84bf717" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-3219473 ot-flex-column-vertical" data-id="3219473" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-fcecb29 elementor-widget elementor-widget-text-editor" data-id="fcecb29" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;">public void addAuthor(SolrInputDocument doc, String authorName) {
    doc.addField(“author”, authorName)
}   </pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-e8e3a03 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="e8e3a03" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-7f718e1 ot-flex-column-vertical" data-id="7f718e1" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-52efa18 elementor-widget elementor-widget-text-editor" data-id="52efa18" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">现在，假设创建<em> SolrInputDocument </em>实例<strong>的方法知道上下文(全部或部分更新</strong>):</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-d118161 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="d118161" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-b6dce84 ot-flex-column-vertical" data-id="b6dce84" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-c0a9dd4 elementor-widget elementor-widget-text-editor" data-id="c0a9dd4" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;">// In case of full document update
SolrInputDocument doc = new SolrInputDocument();</pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-20483e8 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="20483e8" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-9304f9e ot-flex-column-vertical" data-id="9304f9e" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-2fb3793 elementor-widget elementor-widget-text-editor" data-id="2fb3793" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">或者</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-7499c19 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="7499c19" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-3ae4401 ot-flex-column-vertical" data-id="3ae4401" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-99c825a elementor-widget elementor-widget-text-editor" data-id="99c825a" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;">// in case of partial document update (i.e. atomic update)
SolrInputDocument doc = new PartialInputDocument();</pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-3e3e800 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="3e3e800" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-4cd0676 ot-flex-column-vertical" data-id="4cd0676" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-dd48dd5 elementor-widget elementor-widget-text-editor" data-id="dd48dd5" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">然后，<strong>不管前面的选择</strong>，下面的方法正确执行:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-f4a52e2 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="f4a52e2" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-1949773 ot-flex-column-vertical" data-id="1949773" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-fb37e02 elementor-widget elementor-widget-text-editor" data-id="fb37e02" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre style="line-height: 1.71429; color: #6d6d6d;">addAuthor(doc, “Ralph Johnson”); </pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-440096b ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="440096b" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-d234943 ot-flex-column-vertical" data-id="d234943" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-5a83cf9 elementor-widget elementor-widget-text-editor" data-id="5a83cf9" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">根据传递的<em> SolrInputDocument </em>实例类型，调用适当的<em> addField </em>方法，结果文档触发<strong>完全或部分</strong>更新。这同样适用于填充文档状态的所有其他方法。</p>
<p class="translated">需要强调的是，这些方法的签名没有改变，<strong>多态</strong>根据类型管理正确的实现。</p>
<p class="translated"><!-- wp:paragraph --></p>
<p class="translated"><!-- /wp:paragraph --></p>
<p class="translated"><!-- wp:paragraph --></p>
<p class="translated"><!-- /wp:paragraph --></p>
<p class="translated"><!-- wp:paragraph --></p>
<p class="translated"><!-- /wp:paragraph --></p>
<p class="translated">作为旁注，请记住<em> SolrInputDocument </em>(以及<em>partialrinputdocument</em>子类)是成为<strong>脆弱类</strong><a href="https://web.archive.org/web/20220925175711/https://en.wikipedia.org/wiki/Fragile_base_class" target="_blank" rel="noopener">【3】</a>的潜在候选。<br/>这意味着上述内容并不打算作为适合任何可能情况的通用解决方案。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-691b710c ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="691b710c" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-313c80a8 ot-flex-column-vertical" data-id="313c80a8" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-208e0f79 elementor-widget elementor-widget-iheading" data-id="208e0f79" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>// our service</span>
	        <h2 class="main-heading translated">不要脸的塞给我们培训和服务！</h2>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-7ba1c67b elementor-widget elementor-widget-text-editor" data-id="7ba1c67b" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">我提到过我们做<a href="https://web.archive.org/web/20220925175711/https://sease.io/training/apache-solr-training/apache-solr-beginner-training"> Apache Solr初学者</a>和<a href="https://web.archive.org/web/20220925175711/https://sease.io/training/elasticsearch-trainings/elasticsearch-beginner-training"> Elasticsearch初学者</a>培训吗？<br/>我们也提供这些话题的咨询，<a href="https://web.archive.org/web/20220925175711/https://sease.io/contacts">如果你想让你的搜索引擎更上一层楼，请联系</a>！</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-30b611e ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="30b611e" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-78c68c6 ot-flex-column-vertical" data-id="78c68c6" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-efe20f4 elementor-widget elementor-widget-iheading" data-id="efe20f4" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>// STAY ALWAYS UP TO DATE</span>
	        <h2 class="main-heading translated">订阅我们的时事通讯</h2>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-9ed4521 elementor-widget elementor-widget-text-editor" data-id="9ed4521" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">你喜欢这篇关于原子更新的文章吗？不要忘记订阅我们的时事通讯，以便随时了解信息检索世界的最新动态！</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-9783fbc elementor-widget elementor-widget-wp-widget-mc4wp_form_widget" data-id="9783fbc" data-element_type="widget" data-widget_type="wp-widget-mc4wp_form_widget.default">
				<div class="elementor-widget-container">
			<script>(function() {
	window.mc4wp = window.mc4wp || {
		listeners: [],
		forms: {
			on: function(evt, cb) {
				window.mc4wp.listeners.push(
					{
						event   : evt,
						callback: cb
					}
				);
			}
		}
	}
})();
</script><!-- Mailchimp for WordPress v4.8.8 - https://wordpress.org/plugins/mailchimp-for-wp/ --><form id="mc4wp-form-1" class="mc4wp-form mc4wp-form-1343" method="post" data-id="1343" data-name="Sease Mailchimp"><div class="mc4wp-form-fields">
<div class="subscribe-inner-form">
	<input type="email" name="EMAIL" placeholder="Your Email" required=""/>
	<button type="submit" class="subscribe-btn-icon"><i class="flaticon-telegram"/></button>
</div>	

<p class="translated"><label> <input name="AGREE_TO_TERMS" type="checkbox" value="1" required=""/> <a href="https://web.archive.org/web/20220925175711/https://sease.io/privacy-policy" target="_blank">我已经阅读并同意隐私政策</a> </label></p></div><label style="display: none !important;">Leave this field empty if you're human: <input type="text" name="_mc4wp_honeypot" value="" tabindex="-1" autocomplete="off"/></label><input type="hidden" name="_mc4wp_timestamp" value="1664128631"/><input type="hidden" name="_mc4wp_form_id" value="1343"/><input type="hidden" name="_mc4wp_form_element_id" value="mc4wp-form-1"/><div class="mc4wp-response"/></form><!-- / Mailchimp for WordPress Plugin -->		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
									    
</body>
</html>