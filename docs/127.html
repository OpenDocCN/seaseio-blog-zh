<html>
<head>
<title>Apache Solr Neural Search Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Apache Solr神经搜索教程</h1>
<blockquote>原文：<a href="https://web.archive.org/web/sease.io/2023/01/apache-solr-neural-search-tutorial.html#0001-01-01">https://web.archive.org/web/sease.io/2023/01/apache-solr-neural-search-tutorial.html#0001-01-01</a></blockquote>
									<section class="elementor-section elementor-top-section elementor-element elementor-element-61e1ece ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="61e1ece" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-7c62544 ot-flex-column-vertical" data-id="7c62544" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-ed40a2d elementor-widget elementor-widget-text-editor" data-id="ed40a2d" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">嗨读者们！在这篇博文中，我们将探索我们对Apache Solr的神经搜索贡献，通过一个端到端的教程提供已经可用的详细描述。</p>
<p class="translated"><!-- /wp:paragraph --> <!-- wp:paragraph {"align":"justify"} --></p>
<p class="has-text-align-justify translated">为了更好地理解基于向量的方法是如何改进搜索的，并了解更多关于Apache Lucene/Solr实现的信息，我们建议从阅读我们之前的两篇博文开始:</p>
<p class="translated"><!-- /wp:paragraph --> <!-- wp:list --></p>
<ul>
<li style="list-style-type: none;">
 
<ul><!-- wp:list-item --></ul>
</li>
</ul>
<ul>
<li style="list-style-type: none;">
 
<ul>
<li class="translated"><a href="https://web.archive.org/web/20230202201702/https://sease.io/2022/01/apache-solr-neural-search.html"> Apache Solr神经搜索</a></li>
</ul>
</li>
</ul>
<p class="translated"><!-- /wp:list-item --> <!-- wp:list-item --></p>
<ul>
<li style="list-style-type: none;">
 
<ul>
<li class="translated"><a href="https://web.archive.org/web/20230202201702/https://sease.io/2022/01/apache-solr-neural-search-knn-benchmark.html"> Apache Solr神经搜索Knn基准</a></li>
</ul>
</li>
</ul>
<p class="translated"><!-- /wp:list-item --></p>
<p class="translated"><!-- /wp:list -->T13】</p>
<p class="has-text-align-justify translated">这篇文章的目的不是深入实现细节，而是在实践中展示如何使用这个新的Apache Solr特性来索引和搜索向量，然后运行完整的端到端神经搜索。<br/>通过实际例子，我们将了解如何:</p>
<ol>
<li class="has-text-align-justify translated"><strong style="color: var( --e-global-color-text );"> Apache Solr实现工作于</strong> <span style="color: var( --e-global-color-text ); font-weight: var( --e-global-typography-text-font-weight );">，引入了新的字段类型和查询解析器</span></li>
<li class="has-text-align-justify translated"><strong>从文本中生成向量</strong>并将大型语言模型与Apache Solr集成</li>
<li class="has-text-align-justify translated"><strong>运行KNN查询</strong>(带和不带过滤器)以及如何使用它们进行重新排序</li>
</ol>
<p class="translated"><!-- /wp:list-item -->T24】</p>
<ul>
<li style="list-style-type: none;"> </li>
</ul>
<p class="translated"><!-- /wp:list-item --> <!-- wp:list-item --></p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-df474af ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="df474af" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-1d13e05 ot-flex-column-vertical" data-id="1d13e05" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-ef977f9 elementor-widget elementor-widget-iheading" data-id="ef977f9" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">神经搜索管道</h2>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-6088b11 elementor-widget elementor-widget-text-editor" data-id="6088b11" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">让我们从使用Solr实现神经搜索的端到端管道的概述开始:</p>
<ol>
<li class="translated"><a href="#download">下载Apache Solr </a> <br/> <br/></li>
<li class="translated"><a href="#produce">对外产生矢量</a> <br/> <br/></li>
<li class="translated"><a href="#create">创建一个包含向量字段<br/> <br/> </a>的索引</li>
<li class="translated"><a href="#index">索引文件</a> <br/> <br/></li>
<li class="translated"><a href="#search">利用矢量场进行搜索</a></li>
</ol>
<p class="translated">我们现在详细描述每个部分，以便您可以轻松地重现本教程。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-73bfc42 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="73bfc42" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-fbfb17d ot-flex-column-vertical" data-id="fbfb17d" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-82e8d0c elementor-widget elementor-widget-iheading" data-id="82e8d0c" data-element_type="widget" id="download" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">1.下载Solr</h4>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-6d3d699 elementor-widget elementor-widget-text-editor" data-id="6d3d699" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">神经搜索已于2022年5月随Apache Solr 9.0发布。<br/>本教程使用最新版本(9.1)，可以从:<a href="https://web.archive.org/web/20230202201702/https://solr.apache.org/downloads.html">https://solr.apache.org/downloads.html</a>下载</p>
<p class="has-text-align-justify translated">Solr可以安装在任何支持Java运行时环境(JRE)版本11或更高版本的系统上(Linux、macOS和Windows)。</p>
<p class="has-text-align-justify translated"><em>看一下<a href="https://web.archive.org/web/20230202201702/https://www.apache.org/dyn/closer.cgi#verify">指令</a>用于验证下载文件的完整性，包括sha512密钥和PGP密钥。</em></p>
<p class="has-text-align-justify translated">将下载的文件解压缩到您想要使用它的位置，从该文件夹打开终端并在本地运行Solr:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-1f5512e elementor-widget elementor-widget-html" data-id="1f5512e" data-element_type="widget" id="produce" data-widget_type="html.default">
				<div class="elementor-widget-container">
			<pre>bin/solr start</pre>		</div>
				</div>
				<div class="elementor-element elementor-element-8eea840 elementor-widget elementor-widget-text-editor" data-id="8eea840" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">您现在可以导航到Solr管理界面:<a href="https://web.archive.org/web/20230202201702/http://localhost:8983/solr/"><u>http://localhost:8983/Solr/</u></a></p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-15490e1 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="15490e1" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-995dc20 ot-flex-column-vertical" data-id="995dc20" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-d347133 elementor-widget elementor-widget-iheading" data-id="d347133" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">2.外部产生矢量</h4>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-9e9ca3b elementor-widget elementor-widget-text-editor" data-id="9e9ca3b" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">为了执行利用矢量嵌入的搜索，有必要:</p>
<ol>
<li class="translated">在Solr外训练一个模型。</li>
<li class="translated">使用自定义脚本从文档字段创建矢量嵌入。</li>
<li class="translated">把向量推到Solr。</li>
</ol>
<p class="translated">对于本教程，我们使用一个Python项目，您可以很容易地从我们的<a href="https://web.archive.org/web/20230202201702/https://github.com/SeaseLtd/approaching-neural-search"> GitHub </a>页面克隆它。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-5134b1c elementor-widget elementor-widget-iheading" data-id="5134b1c" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h6 class="main-heading translated">Python要求</h6>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-0dab26c elementor-widget elementor-widget-text-editor" data-id="0dab26c" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">要复制此练习，您只需在python环境中安装以下要求:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-8ead6ff elementor-widget elementor-widget-html" data-id="8ead6ff" data-element_type="widget" data-widget_type="html.default">
				<div class="elementor-widget-container">
			<pre>python==3.8.0
sentence-transformers
pysolr</pre>		</div>
				</div>
				<div class="elementor-element elementor-element-1033da7 elementor-widget elementor-widget-iheading" data-id="1033da7" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h6 class="main-heading translated">自然语言处理模型和语料库</h6>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-f8fe21b elementor-widget elementor-widget-text-editor" data-id="f8fe21b" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">为了将文本编码到相应的向量中，我们没有训练模型，而是使用了名为<strong><a href="https://web.archive.org/web/20230202201702/https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2">all-MiniLM-L6-v2</a></strong>的预训练(和微调)模型，这是一种自然语言处理(NLP)句子转换模型。<br/>型号类型为<strong> BERT </strong>，<em> hidden_size </em>(所以<em> <code>embedding_dimension</code> </em>)为384，大致为80MB。</p>
<p class="has-text-align-justify translated">对于本教程，我们采用了MARCO女士的一个语料库，这是一个用于深度学习的大规模信息检索数据集的集合。特别是，我们下载了文章检索集:<a href="https://web.archive.org/web/20230202201702/https://msmarco.blob.core.windows.net/msmarcoranking/collection.tar.gz">collection.tar.gz</a>，并索引了大约10k篇文章。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-cb50564 elementor-widget elementor-widget-iheading" data-id="cb50564" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h6 class="main-heading translated">创建矢量嵌入</h6>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-078f7ad elementor-widget elementor-widget-text-editor" data-id="078f7ad" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">下面是为了从语料库中自动创建矢量嵌入而运行的python脚本:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-b676a4b elementor-widget elementor-widget-html" data-id="b676a4b" data-element_type="widget" data-widget_type="html.default">
				<div class="elementor-widget-container">
			<pre>from sentence_transformers import SentenceTransformer
import torch
import sys
from itertools import islice

BATCH_SIZE = 100
INFO_UPDATE_FACTOR = 1
MODEL_NAME = 'all-MiniLM-L6-v2'

# Load or create a SentenceTransformer model.
model = SentenceTransformer(MODEL_NAME)
# Get device like 'cuda'/'cpu' that should be used for computation.
if torch.cuda.is_available():
    model = model.to(torch.device("cuda"))
print(model.device)

def batch_encode_to_vectors(input_filename, output_filename):
    # Open the file containing text.
    with open(input_filename, 'r') as documents_file:
        # Open the file in which the vectors will be saved.
        with open(output_filename, 'w+') as out:
            processed = 0
            # Processing 100 documents at a time.
            for n_lines in iter(lambda: tuple(islice
            (documents_file, BATCH_SIZE)), ()):
                processed += 1
                if processed % INFO_UPDATE_FACTOR == 0:
                    print("processed {} batch of documents"
                    .format(processed))
                # Create sentence embedding
                vectors = encode(n_lines)
                # Write each vector into the output file.
                for v in vectors:
                    out.write(','.join([str(i) for i in v]))
                    out.write('\n')

def encode(documents):
    embeddings = model.encode(documents, show_progress_bar=True)
    print('vector dimension: ' + str(len(embeddings[0])))
    return embeddings

def main():
    input_filename = sys.argv[1]
    output_filename = sys.argv[2]
    batch_encode_to_vectors(input_filename, output_filename)

if __name__ == "__main__":
        main()</pre>		</div>
				</div>
				<div class="elementor-element elementor-element-927f802 elementor-widget elementor-widget-iheading" data-id="927f802" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>RESPONSE</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-c5de9e8 elementor-widget elementor-widget-html" data-id="c5de9e8" data-element_type="widget" data-widget_type="html.default">
				<div class="elementor-widget-container">
			<pre>processed 1 batch of documents
Batches: 100%|██████████| 4/4 [00:04&lt;00:00,  1.08s/it]
vector dimension: 384
...
...
processed 100 batch of documents
Batches: 100%|██████████| 4/4 [00:02&lt;00:00,  1.35it/s]</pre>		</div>
				</div>
				<div class="elementor-element elementor-element-f672277 elementor-widget elementor-widget-text-editor" data-id="f672277" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">是一个Python框架，你可以用它来计算句子/文本的嵌入；它提供了针对各种任务调整的大量<a href="https://web.archive.org/web/20230202201702/https://www.sbert.net/docs/pretrained_models.html">预训练模型</a>，在这种情况下，我们使用<strong> all-MiniLM-L6-v2 </strong>将句子映射到384维密集向量空间。</p>
<p class="has-text-align-justify translated">python脚本将包含10k个文档的文件(即MS MARCO passage检索集合的一小部分)作为输入:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-10d6359 elementor-widget elementor-widget-html" data-id="10d6359" data-element_type="widget" data-widget_type="html.default">
				<div class="elementor-widget-container">
			<pre>sys.argv[1] = "/path/to/documents_10k.tsv"</pre>		</div>
				</div>
				<div class="elementor-element elementor-element-c00ddf7 elementor-widget elementor-widget-text-editor" data-id="c00ddf7" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated"><em>例如1份文件</em></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-e9e83a3 elementor-widget elementor-widget-text-editor" data-id="e9e83a3" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><em>科学头脑中的交流对于曼哈顿计划的成功与科学智慧同样重要。笼罩在原子研究人员和工程师令人印象深刻的成就上的唯一乌云是他们的成功真正意味着什么；数十万无辜的生命被抹杀。</em></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-5e8e23a elementor-widget elementor-widget-text-editor" data-id="5e8e23a" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">它将输出一个包含相应向量的文件:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-43fdce3 elementor-widget elementor-widget-html" data-id="43fdce3" data-element_type="widget" data-widget_type="html.default">
				<div class="elementor-widget-container">
			<pre>sys.argv[2] = "/path/to/vectors_documents_10k.tsv"
</pre>		</div>
				</div>
				<div class="elementor-element elementor-element-3c84845 elementor-widget elementor-widget-text-editor" data-id="3c84845" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><em>如1号文件</em></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-c8211b4 elementor-widget elementor-widget-html" data-id="c8211b4" data-element_type="widget" data-widget_type="html.default">
				<div class="elementor-widget-container">
			<pre>0.0367823,0.072423555,0.04770486,0.034890372,0.061810732,0.002282318
,0.05258357,0.013747136,-0.0060595,...,0.0054274425</pre>		</div>
				</div>
				<div class="elementor-element elementor-element-3d2c542 elementor-widget elementor-widget-text-editor" data-id="3d2c542" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">有必要将获得的嵌入推送到Solr(我们将在索引文档一节中看到这一点)。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-28e2d9e6 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="28e2d9e6" data-element_type="section" id="create" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-37a15298 ot-flex-column-vertical" data-id="37a15298" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-1ac58da1 elementor-widget elementor-widget-iheading" data-id="1ac58da1" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>// are you finding the tutorial a bit difficult? No worries!</span>
	        <h4 class="main-heading translated">获取我们关于Apache Solr神经搜索的实时教程的门票</h4>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-7241c45c elementor-widget elementor-widget-text-editor" data-id="7241c45c" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">你可以向我们的神经搜索专家现场提问<a href="https://web.archive.org/web/20230202201702/https://sease.io/about/alessandro-benedetti"> Alessandro Benedetti </a>和<a href="https://web.archive.org/web/20230202201702/https://sease.io/ilaria-petreti"> Ilaria Petreti </a></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-5aa36741 elementor-hidden-desktop elementor-widget elementor-widget-ibutton" data-id="5aa36741" data-element_type="widget" data-widget_type="ibutton.default">
				<div class="elementor-widget-container">
					<div class="ot-button">
			<a href="https://web.archive.org/web/20230202201702/https://sease.io/information-retrieval-mini-training-2/end-to-end-apachesolr-neural-search-tutorial" class="octf-btn octf-btn-primary elementor-animation-bob">LIVE TUTORIAL <br/> APACHE SOLR<br/> NEURAL SEARCH <br/></a>
	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-67244d0 elementor-hidden-tablet elementor-hidden-mobile elementor-widget elementor-widget-ibutton" data-id="67244d0" data-element_type="widget" data-widget_type="ibutton.default">
				<div class="elementor-widget-container">
					<div class="ot-button">
			<a href="https://web.archive.org/web/20230202201702/https://sease.io/information-retrieval-mini-training-2/end-to-end-apachesolr-neural-search-tutorial" class="octf-btn octf-btn-primary elementor-animation-bob">LIVE TUTORIAL - APACHE SOLR NEURAL SEARCH </a>
	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-24d6b7f ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="24d6b7f" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-44a6a4b ot-flex-column-vertical" data-id="44a6a4b" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-f8ecbde elementor-widget elementor-widget-iheading" data-id="f8ecbde" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">3.创建包含向量字段的索引</h4>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-4e480ec elementor-widget elementor-widget-text-editor" data-id="4e480ec" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">在安装和启动Solr之后，要做的第一件事是创建一个<strong>集合</strong>(即一个单独的索引和相关的事务日志和配置文件)，以便能够进行索引和搜索。</p>
<p class="translated">下面是创建'<em> <strong> ms-marco </strong> </em>集合的命令:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-7482ea2 elementor-widget elementor-widget-html" data-id="7482ea2" data-element_type="widget" data-widget_type="html.default">
				<div class="elementor-widget-container">
			<pre>bin/solr create -c ms-marco
</pre>		</div>
				</div>
				<div class="elementor-element elementor-element-8fca03e elementor-widget elementor-widget-text-editor" data-id="8fca03e" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">为了使本教程尽可能简单，让我们回顾并编辑配置文件，特别是:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-5bc53a4 elementor-widget elementor-widget-text-editor" data-id="5bc53a4" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-color translated">solrconfig.xml</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-4d7d555 elementor-widget elementor-widget-text-editor" data-id="4d7d555" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">它定义了索引选项、请求处理程序、高亮显示、拼写检查和各种其他配置。</p>
<p class="translated">以下是我们的最小配置文件:</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-226290cc ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="226290cc" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-7c382216 ot-flex-column-vertical" data-id="7c382216" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-44d45a31 elementor-widget elementor-widget-text-editor" data-id="44d45a31" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- wp:paragraph {"align":"justify"} --></p>
<p class="translated"><!-- /wp:paragraph --> <!-- wp:heading {"level":4,"style":{"color":{"text":"#ae254c"}}} --></p>
<pre class="wp-block-code"><code>&lt;?xml version="1.0" ?&gt;
&lt;config&gt;
  &lt;dataDir&gt;${solr.data.dir:}&lt;/dataDir&gt;

  &lt;directoryFactory name="DirectoryFactory"           class="${solr.directoryFactory:solr.NRTCachingDirectoryFactory}"/&gt;
  &lt;schemaFactory class="ClassicIndexSchemaFactory"/&gt;

  &lt;luceneMatchVersion&gt;LATEST&lt;/luceneMatchVersion&gt;

  &lt;updateHandler class="solr.DirectUpdateHandler2"&gt;
    &lt;commitWithin&gt;
      &lt;softCommit&gt;${solr.commitwithin.softcommit:true}&lt;/softCommit&gt;
    &lt;/commitWithin&gt;
  &lt;/updateHandler&gt;

  &lt;requestHandler name="/select" class="solr.SearchHandler"&gt;
    &lt;lst name="defaults"&gt;
      &lt;str name="echoParams"&gt;explicit&lt;/str&gt;
      &lt;str name="indent"&gt;true&lt;/str&gt;
      &lt;str name="df"&gt;text&lt;/str&gt;
    &lt;/lst&gt;
  &lt;/requestHandler&gt;
&lt;/config&gt;</code></pre>
<p class="translated"><!-- /wp:code --> <!-- wp:heading {"level":4,"style":{"color":{"text":"#ae254c"}}} --></p>
<p class="translated"><!-- /wp:list-item --></p>
<p class="translated"><!-- /wp:list --></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-5564f01 elementor-widget elementor-widget-text-editor" data-id="5564f01" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-color translated">schema.xml</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-f5982b2 elementor-widget elementor-widget-text-editor" data-id="f5982b2" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">它是允许定义数据模型的入口点，因此要索引的字段和字段的类型(文本、整数等。).</p>
<p class="has-text-align-justify translated">Solr从启用托管模式开始，但是为了简单和手动编辑文件，我们切换到静态模式。欲了解更多信息，请阅读此处的<a href="https://web.archive.org/web/20230202201702/https://solr.apache.org/guide/solr/latest/configuration-guide/schema-factory.html#switching-from-managed-schema-to-schema-xml"/>。</p>
<p class="translated">同样，我们尽可能保持它的最小化，只包括必要的字段:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-ae1ba11 elementor-widget elementor-widget-text-editor" data-id="ae1ba11" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- wp:paragraph {"align":"justify"} --></p>
<p class="translated"><!-- /wp:paragraph --> <!-- wp:heading {"level":4,"style":{"color":{"text":"#ae254c"}}} --></p>
<p class="translated"><!-- /wp:paragraph -->T29】</p>
<pre class="wp-block-code"><code>&lt;schema name="ms-marco" version="1.0"&gt;
  &lt;fieldType name="string" class="solr.StrField" omitNorms="true" positionIncrementGap="0"/&gt;
  &lt;!-- vector-based field --&gt;
  <strong>&lt;fieldType name="knn_vector" class="solr.DenseVectorField" vectorDimension="384" omitNorms="true"/&gt;</strong>
  &lt;fieldType name="long" class="org.apache.solr.schema.LongPointField" docValues="true" omitNorms="true" positionIncrementGap="0"/&gt;
  &lt;!-- basic text field --&gt;
  &lt;fieldType name="text" class="solr.TextField"&gt;
    &lt;analyzer&gt;
      &lt;tokenizer class="solr.StandardTokenizerFactory"/&gt;
      &lt;filter class="solr.LowerCaseFilterFactory"/&gt;
    &lt;/analyzer&gt;
  &lt;/fieldType&gt;

  &lt;field name="id" type="string" indexed="true" stored="true" multiValued="false" required="false"/&gt;
  &lt;field name="text" type="text" indexed="true" stored="true"/&gt;
  <strong>&lt;field name="vector" type="knn_vector" indexed="true" stored="true" multiValued="false"/&gt;</strong>
  &lt;field name="_version_" type="long" indexed="true" stored="true" multiValued="false"/&gt;
  &lt;uniqueKey&gt;id&lt;/uniqueKey&gt;

&lt;/schema&gt;</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-1748737 elementor-widget elementor-widget-text-editor" data-id="1748737" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">模式是告诉Solr应该如何从输入文档构建索引的地方。它用于配置字段，指定一组字段属性来控制将要产生的数据结构。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-66bc307 elementor-widget elementor-widget-text-editor" data-id="66bc307" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">按照我们的模式定义，文档由3个简单的字段组成:</p>
<ol>
<li class="translated"><strong> <code>id</code> </strong></li>
<li class="translated"><strong> <code/></strong>the document <code><strong>text</strong></code>(将带有文本的源字段转换成矢量)</li>
<li class="translated"><strong> <code>vector</code> </strong>存储由前面章节中看到的Python脚本生成的嵌入</li>
</ol>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-d38c02b elementor-widget elementor-widget-text-editor" data-id="d38c02b" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">目前，密集矢量场不支持<em>文档值</em>和<em>多值</em>。</p>
<p> </p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-347aa45 elementor-widget elementor-widget-text-editor" data-id="347aa45" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated"><strong>密集向量字段</strong> [ <a href="https://web.archive.org/web/20230202201702/https://solr.apache.org/guide/solr/latest/query-guide/dense-vector-search.html"> 1 </a> ]提供了索引和搜索浮动元素密集向量的可能性。在这种情况下，我们将其定义为:</p>
<ul>
<li class="translated"><strong>名称</strong>:字段类型名称</li>
<li class="translated"><strong>等级</strong> : solr。DenseVectorField</li>
<li class="translated"><strong> vectorDimension </strong>:要传入的密集向量的维度，需要等于模型维度。在这种情况下<em> 384 </em>。</li>
</ul>
<p class="has-text-align-justify translated"><em> <strong>当前</strong> <strong>限制</strong> : <br/>向量的最大基数当前被限制为<strong> 1024 </strong>，除了出于性能考虑之外没有其他特殊原因；将来可能会增加，但就目前而言，如果您想使用更大的向量大小，您需要自定义Lucene build，然后在Solr中设置它。</em></p>
<p> </p>
<p class="translated">我们保留了其他参数的默认值，特别是:</p>
<ul>
<li class="translated"><strong> similarityFunction </strong>:向量相似度函数，用于将前K个最相似的向量返回给目标向量。默认为<strong>欧几里德</strong>，否则可以使用<strong>点积</strong>或者<strong>余弦</strong>。<br/> <br/></li>
<li class="translated"><strong> knnAlgorithm </strong>:要使用的底层<em> knn </em>算法；<strong> hnsw </strong>是目前唯一支持的。<br/><strong>–hnswMaxConnections</strong>:控制有多少最近邻候选连接到新节点。默认为<strong> 16 </strong>。<br/><strong>–hnswbeamwwidth</strong>:在图中搜索每个新插入的节点时要跟踪的最近邻候选节点的数量。默认为<strong> 100 </strong>。</li>
</ul>
<p class="has-text-align-justify translated"><em><strong>hnswMaxConnections</strong><i>和</i><strong>hnswbeamwwidth</strong><i>是高级参数，与当前使用的算法严格相关；它们影响索引时构建图形的方式，所以除非您真的需要它们并且知道它们的影响，否则建议不要更改这些值。在</i> <a href="https://web.archive.org/web/20230202201702/https://solr.apache.org/guide/solr/latest/query-guide/dense-vector-search.html"> Solr文档</a> <i>中可以找到Solr参数与</i> HNSW 2018论文<i>参数</i>的映射关系。</em></p>
<p class="has-text-align-justify translated"><strong> N.B. </strong> <br/>修改完所有配置文件后，需要<strong>重新加载集合</strong>(或停止并重启Solr)。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-4225c26 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="4225c26" data-element_type="section" id="index">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-9462ba3 ot-flex-column-vertical" data-id="9462ba3" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-a05bd4e elementor-hidden-tablet elementor-hidden-mobile elementor-widget elementor-widget-spacer" data-id="a05bd4e" data-element_type="widget" data-widget_type="spacer.default">
				<div class="elementor-widget-container">
					<div class="elementor-spacer">
			<div class="elementor-spacer-inner"/>
		</div>
				</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-a0366ab ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="a0366ab" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-8c2da83 ot-flex-column-vertical" data-id="8c2da83" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-0d5fc7c elementor-widget elementor-widget-iheading" data-id="0d5fc7c" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">4.索引文档</h4>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-0000dec elementor-widget elementor-widget-text-editor" data-id="0000dec" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">一旦我们创建了矢量嵌入和索引，我们就可以推送一些文档了。</p>
<p class="has-text-align-justify translated">Solr中的向量索引相当简单，与多值浮点没有太大区别。</p>
<p class="has-text-align-justify translated">我们使用<a href="https://web.archive.org/web/20230202201702/https://pypi.org/project/pysolr/"> pysolr </a>，一个Apache Solr的Python包装器，来索引成批的文档。<br/>下面是python脚本:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-447fe68 elementor-widget elementor-widget-html" data-id="447fe68" data-element_type="widget" data-widget_type="html.default">
				<div class="elementor-widget-container">
			<pre>import sys
import pysolr

## Solr configuration.
SOLR_ADDRESS = 'http://localhost:8983/solr/ms-marco'
# Create a client instance.
solr = pysolr.Solr(SOLR_ADDRESS, always_commit=True)

BATCH_SIZE = 100

def index_documents(documents_filename, embedding_filename):
    # Open the file containing text.
    with open(documents_filename, "r") as documents_file:
        # Open the file containing vectors.
        with open(embedding_filename, "r") as vectors_file:
            documents = []
            # For each document creates a JSON document including 
            both text and related vector. 
            for index, (document, vector_string) in enumerate
            (zip(documents_file, vectors_file)):

                vector = 
                [float(w) for w in vector_string.split(",")]
                doc = {
                    "id": str(index),
                    "text": document,
                    "vector": vector
                }
                # Append JSON document to a list.
                documents.append(doc)

                # To index batches of documents at a time.
                if index % BATCH_SIZE == 0 and index != 0:
                    # How you'd index data to Solr.
                    solr.add(documents)
                    documents = []
                    print("==== indexed {} documents ======"
                    .format(index))
            # To index the rest, when 'documents' list &lt; BATCH_SIZE.
            if documents:
                solr.add(documents)
            print("finished")

def main():
    document_filename = sys.argv[1]
    embedding_filename = sys.argv[2]
    index_documents(document_filename, embedding_filename)

if __name__ == "__main__":
    main()</pre>		</div>
				</div>
				<div class="elementor-element elementor-element-27da1b9 elementor-widget elementor-widget-iheading" data-id="27da1b9" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>RESPONSE</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-5cb7cd9 elementor-widget elementor-widget-html" data-id="5cb7cd9" data-element_type="widget" data-widget_type="html.default">
				<div class="elementor-widget-container">
			<pre>==== indexed 100 documents ======
==== indexed 200 documents ======
...
finished</pre>		</div>
				</div>
				<div class="elementor-element elementor-element-dc56f30 elementor-widget elementor-widget-text-editor" data-id="dc56f30" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">python脚本将接受两个输入文件，一个包含文本，另一个包含相应的向量:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-9348d5f elementor-widget elementor-widget-html" data-id="9348d5f" data-element_type="widget" data-widget_type="html.default">
				<div class="elementor-widget-container">
			<pre>sys.argv[1] = "/path/to/documents_10k.tsv"
sys.argv[2] = "/path/to/vectors_documents_10k.tsv"</pre>		</div>
				</div>
				<div class="elementor-element elementor-element-b785e3f elementor-widget elementor-widget-text-editor" data-id="b785e3f" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">对于两个文件的每个元素，脚本创建一个JSON文档(包括id、文本和向量)并将其添加到一个列表中；当列表达到BATCH_SIZE集合时，JSON文档将被推送到Solr。<br/>例如JSON:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-832e501 elementor-widget elementor-widget-text-editor" data-id="832e501" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- /wp:paragraph --> <!-- wp:code --></p>
<pre class="wp-block-code"><code>{
	'id': '0',
	'text': 'The presence of communication amid scientific minds was equally important to the success of the Manhattan Project as scientific intellect was. The only cloud hanging over the impressive achievement of the atomic researchers and engineers is what their success truly meant; hundreds of thousands of innocent lives obliterated.\n',
	'vector': [0.0367823, 0.072423555, 0.04770486, 0.034890372, 0.061810732, 0.002282318, 0.05258357, 0.013747136, -0.0060595, 0.020382827, 0.022016432, 0.017639274, ..., 0.0054274425]
}</code></pre>
<p class="translated"><!-- /wp:code --></p></div>
						</div>
				</div>
				<div class="elementor-element elementor-element-77cf52b elementor-widget elementor-widget-text-editor" data-id="77cf52b" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">在这一步之后，Solr中已经有10，000个文档被索引，我们准备好基于查询检索它们。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-e654b7a ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="e654b7a" data-element_type="section" id="search" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-7765345 ot-flex-column-vertical" data-id="7765345" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-98fbea1 elementor-widget elementor-widget-iheading" data-id="98fbea1" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>// are you finding the tutorial a bit difficult? No worries!</span>
	        <h4 class="main-heading translated">获取我们关于Apache Solr神经搜索的实时教程的门票</h4>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-814e5cd elementor-widget elementor-widget-text-editor" data-id="814e5cd" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">你将能够向我们的神经搜索专家<a href="https://web.archive.org/web/20230202201702/https://sease.io/about/alessandro-benedetti">亚历山德罗·贝内代蒂</a>和<a href="https://web.archive.org/web/20230202201702/https://sease.io/ilaria-petreti">伊拉莉亚·彼得雷蒂</a>现场提问所有问题</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-510a689 elementor-hidden-desktop elementor-widget elementor-widget-ibutton" data-id="510a689" data-element_type="widget" data-widget_type="ibutton.default">
				<div class="elementor-widget-container">
					<div class="ot-button">
			<a href="https://web.archive.org/web/20230202201702/https://sease.io/information-retrieval-mini-training-2/end-to-end-apachesolr-neural-search-tutorial" class="octf-btn octf-btn-primary elementor-animation-bob">LIVE TUTORIAL <br/> APACHE SOLR<br/> NEURAL SEARCH <br/></a>
	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-d9e3281 elementor-hidden-tablet elementor-hidden-mobile elementor-widget elementor-widget-ibutton" data-id="d9e3281" data-element_type="widget" data-widget_type="ibutton.default">
				<div class="elementor-widget-container">
					<div class="ot-button">
			<a href="https://web.archive.org/web/20230202201702/https://sease.io/information-retrieval-mini-training-2/end-to-end-apachesolr-neural-search-tutorial" class="octf-btn octf-btn-primary elementor-animation-bob">LIVE TUTORIAL - APACHE SOLR NEURAL SEARCH</a>
	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-74d8455 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="74d8455" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-c36f6f8 ot-flex-column-vertical" data-id="c36f6f8" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-82a5f27 elementor-widget elementor-widget-iheading" data-id="82a5f27" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">5.利用向量场的搜索</h4>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-ad34c94 elementor-widget elementor-widget-text-editor" data-id="ad34c94" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">为了进行一些查询，我们从Marco女士那里下载了段落检索查询:<a href="https://web.archive.org/web/20230202201702/https://msmarco.blob.core.windows.net/msmarcoranking/queries.tar.gz">queries.tar.gz</a></p>
<p class="has-text-align-justify translated">以下示例中报告的查询是:<code>"what is a bank transit number"</code>。<br/>为了将其转换成向量并在KNN查询中使用，我们运行python脚本<em>single-sentence-transformers . py</em>(来自我们的GitHub项目):</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-047561d elementor-widget elementor-widget-text-editor" data-id="047561d" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<!-- wp:code -->
<pre class="wp-block-code"><code>from sentence_transformers import SentenceTransformer

# The sentence we like to encode.
sentences = ["what is a bank transit number"]

# Load or create a SentenceTransformer model.
model = SentenceTransformer('sentence-transformers/all-MiniLM-L6-v2')

# Compute sentence embeddings.
embeddings = model.encode(sentences)

# Create a list object, comma separated.
vector_embeddings = list(embeddings)
print(vector_embeddings)</code></pre>
<p class="translated"><!-- /wp:code --></p></div>
						</div>
				</div>
				<div class="elementor-element elementor-element-5e922af elementor-widget elementor-widget-text-editor" data-id="5e922af" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">输出将是一个必须复制到查询中的浮点数组:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-b4477cd elementor-widget elementor-widget-text-editor" data-id="b4477cd" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- /wp:paragraph --> <!-- wp:code --></p>
<pre class="wp-block-code"><code><strong>[-9.01364535e-03, -7.26634488e-02, -1.73818860e-02, ..., ..., -1.16323479e-01]</strong></code></pre>
<p class="translated"><!-- /wp:code --></p></div>
						</div>
				</div>
				<div class="elementor-element elementor-element-33a4599 elementor-widget elementor-widget-text-editor" data-id="33a4599" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">以下是神经搜索查询的几个例子:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-e4fd100 elementor-widget elementor-widget-iheading" data-id="e4fd100" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h6 class="main-heading translated">KNN查询</h6>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-3ece03b elementor-widget elementor-widget-text-editor" data-id="3ece03b" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">从搜索的角度来看，Solr引入了一个新的查询解析器:<strong> knn查询解析器</strong></p>
<p class="translated">它只接受几个参数作为输入:</p>
<ul>
<li class="translated"><strong> f </strong>:存储矢量嵌入的字段</li>
<li class="translated"><strong> topK: </strong>要检索的最近邻的个数</li>
<li class="translated"><strong>向量查询</strong>:表示查询的方括号内的浮点值列表</li>
</ul>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-c519154 elementor-widget elementor-widget-iheading" data-id="c519154" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>REQUEST</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-8655d7d elementor-widget elementor-widget-text-editor" data-id="8655d7d" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
									</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-a54103c elementor-widget elementor-widget-text-editor" data-id="a54103c" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- /wp:heading --> <!-- wp:code --></p>
<pre class="wp-block-code"><code>curl -X POST http://localhost:8983/solr/ms-marco/select?fl=id,text,score -d '
{
  "query": "<strong>{!knn f=vector topK=3}[-9.01364535e-03, -7.26634488e-02, -1.73818860e-02, ..., -1.16323479e-01]</strong>"
}'</code></pre>
<p class="translated"><!-- /wp:code --></p></div>
						</div>
				</div>
				<div class="elementor-element elementor-element-71a67a8 elementor-widget elementor-widget-text-editor" data-id="71a67a8" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><strong>注意:<br/> </strong>这个查询应该是一个<em> POST </em>，因为这个向量很可能会超过一个GET URL所能接受的字符数。为了便于阅读，在报告查询时，我们通过插入点来减少(非常长的)向量的长度。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-e28e007 elementor-widget elementor-widget-iheading" data-id="e28e007" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>RESPONSE</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-0b65e96 elementor-widget elementor-widget-text-editor" data-id="0b65e96" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- wp:code --></p>
<pre class="wp-block-code"><code>{
  "responseHeader":{
    ...,
    ...,
  "response":{<strong>"numFound":3</strong>,"start":0,"maxScore":0.44739443,"numFoundExact":true,"docs":[
      {
        "id":"<strong>7686</strong>",
        "text":["A. A federal tax identification number ... to identify your business to several federal agencies responsible for the regulation of business.\n"],
        "score":0.44739443},
      {
        "id":"<strong>7691</strong>",
        "text":["A. A federal tax identification number (also known as an employer identification number or EIN), is a number assigned solely to your business by the IRS.\n"],
        "score":0.44169965},
      {
        "id":"<strong>7692</strong>",
        "text":["Letâs start at the beginning. A tax ID number or employer identification number (EIN) is a number ... to a business, much like a social security number does for a person.\n"],
        "score":0.43761322}]
  }}</code></pre>
<p class="translated"><!-- /wp:code --></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-4a21f18 elementor-widget elementor-widget-text-editor" data-id="4a21f18" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">设置好<em> topK=3 </em>后，我们得到了查询“<em>什么是银行转帐号码</em>”的最佳三个文档。</p>
<p class="has-text-align-justify translated">同样，为了便于阅读，我们将查询响应中包含的信息限制为指定的字段列表(<strong> <code>fl</code> </strong>参数)，而不打印(非常长的)密集向量字段。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-1d78a45 elementor-widget elementor-widget-iheading" data-id="1d78a45" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h6 class="main-heading translated">KNN +预过滤</h6>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-ffb6abf elementor-widget elementor-widget-text-editor" data-id="ffb6abf" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">为了克服Solr 9.0 的<a href="https://web.archive.org/web/20230202201702/https://solr.apache.org/guide/solr/9_0/query-guide/dense-vector-search.html#usage-with-filter-queries">文档中描述的后置过滤的限制，Apache Solr 9.1引入了<strong>前置过滤</strong></a></p>
<p class="has-text-align-justify translated">这种贡献提供了运行过滤查询的可能性，以便可以首先缩小搜索范围，然后搜索<em> topK </em>邻居。</p>
<p class="has-text-align-justify translated">主查询中基于向量的knn搜索和过滤查询中的经典词汇搜索:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-e0043e0 elementor-widget elementor-widget-iheading" data-id="e0043e0" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>REQUEST</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-262e7e0 elementor-widget elementor-widget-text-editor" data-id="262e7e0" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- wp:code --></p>
<pre class="wp-block-code"><code>curl -X POST http://localhost:8983/solr/ms-marco/select?fl=id,text,score -d '
{
  <strong>"query" : "{!knn f=vector topK=3}[-9.01364535e-03, -7.26634488e-02, -1.73818860e-02, ..., -1.16323479e-01]"</strong>,
  "filter" : "id:(7686 7692 1001 2001)"
}'</code></pre>
<p class="translated"><!-- /wp:code --></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-0c6ea78 elementor-widget elementor-widget-iheading" data-id="0c6ea78" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>RESPONSE</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-51b8022 elementor-widget elementor-widget-text-editor" data-id="51b8022" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- wp:code --></p>
<pre class="wp-block-code"><code>{
  "responseHeader":{
   ...,
   ...,
  "response":{<strong>"numFound":3</strong>,"start":0,"maxScore":0.44739443,"numFoundExact":true,"docs":[
      {
        "id":"<strong>7686</strong>",
        "text":["A. A federal tax identification number ... of business.\n"],
        "score":0.44739443},
      {
        "id":"<strong>7692</strong>",
        "text":["Letâs start at the beginning. A tax ID number ... for a person.\n"],
        "score":0.43761322},
      {
        "id":"<strong>1001</strong>",
        "text":["The 23,000-square-mile (60,000 km2) Matanuska-Susitna ... in 1818.\n"],
        "score":0.33552456}]
  }}</code></pre>
<p class="translated"><!-- /wp:code --></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-bbac68b elementor-widget elementor-widget-text-editor" data-id="bbac68b" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">结果通过“<em>FQ = id:(7686769210012001)</em>进行预过滤，然后只有来自该子集的文档被认为是knn检索的候选。<br/>设置了<em> topK=3 </em>之后，knn query从4个文档的子集中提取了前3个文档。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-781ac58 elementor-widget elementor-widget-iheading" data-id="781ac58" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h6 class="main-heading translated">混合搜索</h6>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-03ee770 elementor-widget elementor-widget-text-editor" data-id="03ee770" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">另一个可用的特性是结合混合的密集和稀疏检索。<br/>在Apache Solr中，有查询解析器可以让你通过组合不同查询解析器的结果来构建一个查询；比如<strong> <a href="https://web.archive.org/web/20230202201702/https://solr.apache.org/guide/solr/latest/query-guide/other-parsers.html#boolean-query-parser">布尔查询解析器</a> </strong>，在这里你可以定义多个子句，这些子句将影响搜索结果如何从你的索引中匹配以及如何在你的排名中得分。</p>
<p class="has-text-align-justify translated">在下面的例子中，我们定义了2个<code>should</code>子句:第一个是词法子句，而第二个子句是纯基于向量的搜索子句。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-81eb19c elementor-widget elementor-widget-iheading" data-id="81eb19c" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>REQUEST</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-2271317 elementor-widget elementor-widget-text-editor" data-id="2271317" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- wp:code --></p>
<pre class="wp-block-code"><code>curl -X POST http://localhost:8983/solr/ms-marco/select?fl=id,text,score -d '
{
    "query": {
        "bool": {
            "should": [
            "{!type=field f=id v='7686'}",
 <strong>"{!knn f=vector topK=3}[-9.01364535e-03, -7.26634488e-02, -1.73818860e-02, ..., -1.16323479e-01]</strong>"
            ]
        }
    }
}'</code></pre>
<p class="translated"><!-- /wp:code --></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-f7ddd5d elementor-widget elementor-widget-iheading" data-id="f7ddd5d" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>RESPONSE</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-de98bd5 elementor-widget elementor-widget-text-editor" data-id="de98bd5" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- wp:code --></p>
<pre class="wp-block-code"><code>{
  "responseHeader":{
   ...}},
  "response":{"numFound":3,"start":0,"maxScore":4.4451337,"numFoundExact":true,"docs":[
      {
        "id":"7686",
        "text":["A. A federal tax identification number ... of business.\n"],
        "score":4.4451337},
      {
        "id":"7691",
        "text":["A. A federal tax identification number ... by the IRS.\n"],
        "score":0.44169965},
      {
        "id":"7692",
        "text":["Letâs start at the beginning. A tax ID number ... for a person.\n"],
        "score":0.43761322}]
  }}</code></pre>
<p class="translated"><!-- /wp:code --></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-f0ddac2 elementor-widget elementor-widget-text-editor" data-id="f0ddac2" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">在这种情况下，搜索结果的最终列表是从两个子句(should)导出的文档的组合，其中<em> id:7686 </em>具有较高的分数，因为通过匹配两个子句，两个分数被加在一起。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-d5d82c6 elementor-widget elementor-widget-iheading" data-id="d5d82c6" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h6 class="main-heading translated">重新排序查询</h6>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-3422b03 elementor-widget elementor-widget-text-editor" data-id="3422b03" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">目前可以将<a href="https://web.archive.org/web/20230202201702/https://solr.apache.org/guide/solr/latest/query-guide/query-re-ranking.html">查询重排序</a>与knn查询解析器一起使用。</p>
<p class="has-text-align-justify translated">查询重新排序允许您运行一个简单的查询(<em> q </em>)来匹配文档，然后使用一个更复杂的查询(在这种情况下是knn查询)返回的分数来重新排序文档。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-a51966c elementor-widget elementor-widget-iheading" data-id="a51966c" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>REQUEST</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-87f1f6b elementor-widget elementor-widget-text-editor" data-id="87f1f6b" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- wp:code --></p>
<pre class="wp-block-code"><code>curl --location -g --request POST "http://localhost:8983/solr/ms-marco/select?q=id:(1001 7686 7692 2001)&amp;fl=id,text,score<strong>&amp;rq={!rerank reRankQuery=$rqq reRankDocs=4 reRankWeight=1}&amp;rqq={!knn f=vector topK=4}[-9.01364535e-03, -7.26634488e-02, ..., -1.16323479e-01]"</strong></code></pre>
<p class="translated"><!-- /wp:code --></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-87b5ad8 elementor-widget elementor-widget-text-editor" data-id="87b5ad8" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">注意<br/>为了便于阅读，我们已经对这个查询进行了解码，但是要使它工作，您只需对值进行编码(删除空格，例如<code>q=id:(1001%207686%207692%202001)</code>，rq= <code>{!rerank%20reRankQuery%3D%24rqq%20reRankDocs%3D4%20reRankWeight%3D1}</code>)并禁用bash历史扩展。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-56f6dde elementor-widget elementor-widget-iheading" data-id="56f6dde" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>RESPONSE</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-25c0eb7 elementor-widget elementor-widget-text-editor" data-id="25c0eb7" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated"><!-- wp:code --></p>
<pre><code>{
  "responseHeader":{
   ....}},
  "response":{"<strong>numFound":4</strong>,"start":0,"maxScore":3.9977393,"numFoundExact":true,"docs":[
      {
        "id":"<strong>7686</strong>",
        "text":["A. A federal tax identification number ... of business.\n"],
        "<strong>score":4.4451337</strong>},
      {
        "id":"<strong>7692</strong>",
        "text":["Letâs start at the beginning. A tax ID number ... for a person.\n"],
        "<strong>score":4.4353523</strong>},
      {
        "id":"1001",
        "text":["The 23,000-square-mile (60,000 km2) Matanuska-Susitna ... in 1818.\n"],
        "score":3.9977393},
      {
        "id":"2001",
        "text":["The researchers were in Baltimore on Tuesday ... believed.\n"],
        "score":3.9977393}]
  }}</code></pre>
<p class="translated"><!-- /wp:code --></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-174bd4d elementor-widget elementor-widget-text-editor" data-id="174bd4d" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">目前不推荐使用knn查询解析器进行重新排序，原因如下。</p>
<p class="has-text-align-justify translated">这里所发生的是，第二次通过分数(从reRank查询中得出)仅针对要搜索的目标向量的k个最近邻居内的文档进行计算，并且当前的主要限制是，它是在整个索引(不是从主查询中得出的文档的子集)上计算<strong>。</strong></p>
<p class="has-text-align-justify translated">事实上，在这种情况下:</p>
<ul>
<li class="translated">对于<em> id:7686 </em>和<em> id:7692 </em>，第一次通过分数(从主查询<code>q</code>得出)被添加到第二次通过分数，并乘以乘法因子(<code>reRankWeight</code> ) <br/> <br/></li>
<li class="translated">对于<em> id:1001 </em>和<em> id:2001 </em>，原始文档分数保持不变，因为它们匹配原始查询，但不匹配knn重新排序查询(在<em> topK </em>之外)。</li>
</ul>
<p class="has-text-align-justify translated">因此，您并没有对每个第一轮检索搜索结果进行一对一的重新评分，而是有效地将它们与knn结果相交。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-75fcb87 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="75fcb87" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-ea10b91 ot-flex-column-vertical" data-id="ea10b91" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-905a301 elementor-widget elementor-widget-iheading" data-id="905a301" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">未来作品</h2>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-6cc20b3 elementor-widget elementor-widget-text-editor" data-id="6cc20b3" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">我们最近的开源贡献最终将<a href="https://web.archive.org/web/20230202201702/https://sease.io/2022/01/apache-solr-neural-search.html">神经搜索引入了Apache Solr </a>，我们希望本教程能够帮助您理解如何利用这一新的Solr特性来改善您的搜索体验！</p>
<p class="translated">仍然有一些工作要做，特别是，我们计划为Apache Solr做出贡献:</p>
<ul>
<li class="translated">一个<strong>模型管理工具</strong>，它可以是一个单独的虚拟机，并利用不同的存储系统(而不是Zookeeper)。这个想法是以类似于学习排序集成的方式来管理语言模型。<br/> <br/></li>
<li class="translated">一个<strong>更新请求处理器</strong>，它接受一个BERT模型的输入，并在<strong>索引时间</strong>进行推理矢量化，以自动丰富文档。<br/> <br/></li>
<li class="translated">一个<strong>查询解析器</strong>，它接受一个BERT模型的输入，并在<strong>查询时间</strong>进行推理向量化，以便自动对查询进行编码。</li>
</ul>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-516ce63a ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="516ce63a" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-74c4fb3e ot-flex-column-vertical" data-id="74c4fb3e" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-503f11a8 elementor-widget elementor-widget-iheading" data-id="503f11a8" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>// our service</span>
	        <h2 class="main-heading translated">不要脸的塞给我们培训和服务！</h2>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-f969fdb elementor-widget elementor-widget-text-editor" data-id="f969fdb" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">正如我所说，我们运行一个有用的<a href="https://web.archive.org/web/20230202201702/https://sease.io/information-retrieval-mini-training-2/end-to-end-apachesolr-neural-search-tutorial">端到端Apache Solr神经搜索教程。</a> <br/>但是我们也提供这方面的咨询，所以<a href="https://web.archive.org/web/20230202201702/https://sease.io/contacts">联系</a>如果你想借助AI的力量让你的搜索引擎更上一层楼！</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-9257d6f ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="9257d6f" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-3540d702 ot-flex-column-vertical" data-id="3540d702" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-4891181f elementor-widget elementor-widget-iheading" data-id="4891181f" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>// STAY ALWAYS UP TO DATE</span>
	        <h2 class="main-heading translated">订阅我们的时事通讯</h2>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-5a44706 elementor-widget elementor-widget-text-editor" data-id="5a44706" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">你喜欢这篇关于Apache Solr神经搜索教程的帖子吗？不要忘记订阅我们的时事通讯，以便随时了解信息检索世界的最新动态！</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-7081dc7a elementor-widget elementor-widget-wp-widget-mc4wp_form_widget" data-id="7081dc7a" data-element_type="widget" data-widget_type="wp-widget-mc4wp_form_widget.default">
				<div class="elementor-widget-container">
			<script>(function() {
	window.mc4wp = window.mc4wp || {
		listeners: [],
		forms: {
			on: function(evt, cb) {
				window.mc4wp.listeners.push(
					{
						event   : evt,
						callback: cb
					}
				);
			}
		}
	}
})();
</script><!-- Mailchimp for WordPress v4.8.12 - https://wordpress.org/plugins/mailchimp-for-wp/ --><form id="mc4wp-form-1" class="mc4wp-form mc4wp-form-1343" method="post" data-id="1343" data-name="Sease Mailchimp"><div class="mc4wp-form-fields">
<div class="subscribe-inner-form">
	<input type="email" name="EMAIL" placeholder="Your Email" required=""/>
	<button type="submit" class="subscribe-btn-icon"><i class="flaticon-telegram"/></button>
</div>	

<p class="translated"><label> <input name="AGREE_TO_TERMS" type="checkbox" value="1" required=""/> <a href="https://web.archive.org/web/20230202201702/https://sease.io/privacy-policy" target="_blank">我已经阅读并同意隐私政策</a> </label></p></div><label style="display: none !important;">Leave this field empty if you're human: <input type="text" name="_mc4wp_honeypot" value="" tabindex="-1" autocomplete="off"/></label><input type="hidden" name="_mc4wp_timestamp" value="1675369023"/><input type="hidden" name="_mc4wp_form_id" value="1343"/><input type="hidden" name="_mc4wp_form_element_id" value="mc4wp-form-1"/><div class="mc4wp-response"/></form><!-- / Mailchimp for WordPress Plugin -->		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
									    
</body>
</html>