<html>
<head>
<title>Elasticsearch Neural Search Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Elasticsearch神经搜索教程</h1>
<blockquote>原文：<a href="https://web.archive.org/web/sease.io/2023/03/elasticsearch-neural-search-tutorial.html#0001-01-01">https://web.archive.org/web/sease.io/2023/03/elasticsearch-neural-search-tutorial.html#0001-01-01</a></blockquote>
									<section class="elementor-section elementor-top-section elementor-element elementor-element-da9b06e ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="da9b06e" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-df91899 ot-flex-column-vertical" data-id="df91899" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-6b7d79f elementor-widget elementor-widget-text-editor" data-id="6b7d79f" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">嗨读者们！在这里，我们将通过新的一集来了解开源技术如何实现文本矢量化和基于向量的搜索(也称为神经搜索，因为使用了深度神经网络来编码文本向量)。<br/>我们已经发表了三篇关于以下内容的博文:</p>
<ul>
<li class="translated"><a href="https://web.archive.org/web/20230328112515/https://sease.io/2022/12/opensearch-neural-search-plugin-tutorial.html"> OpenSearch神经搜索插件教程:索引和搜索</a></li>
<li class="translated"><a href="https://web.archive.org/web/20230328112515/https://sease.io/2023/01/apache-solr-neural-search-tutorial.html"> Apache Solr神经搜索教程:索引和搜索</a></li>
<li class="translated"><a href="https://web.archive.org/web/20230328112515/https://sease.io/2023/02/vespa-neural-search-tutorial.html"> Vespa神经搜索教程</a></li>
</ul>
<p class="has-text-align-justify translated">现在轮到Elasticsearch了！<br/>这篇博文探讨了如何在Elasticsearch中管理矢量搜索，详细描述了端到端教程中已经提供的内容。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-2e1d1b1 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="2e1d1b1" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-91b517a ot-flex-column-vertical" data-id="91b517a" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-99a320f elementor-widget elementor-widget-iheading" data-id="99a320f" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">弹性搜索神经搜索管道</h2>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-db022da elementor-widget elementor-widget-text-editor" data-id="db022da" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">基于向量的搜索和NLP(自然语言处理)功能可从2022年2月发布的Elastic版本获得。</p>
<p class="translated">下面只是一个图表，以方便地显示如何矢量搜索引擎的工作；它包括:</p>
<ul>
<li class="translated"><strong>转换</strong>原始实体，如歌曲、图像或一些文本<strong>为数字表示</strong>(矢量嵌入)</li>
<li class="translated">使用<strong>距离</strong>度量来表示向量之间的相似度<strong/></li>
<li class="translated"><strong>使用近似近邻(ANN)算法在</strong>中搜索<strong>相关数据</strong>(您的查询)</li>
</ul>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-00d6c6c elementor-widget elementor-widget-image" data-id="00d6c6c" data-element_type="widget" data-widget_type="image.default">
				<div class="elementor-widget-container">
								<div class="elementor-image">
									<figure class="wp-caption">
										<img data-attachment-id="55836" data-permalink="https://web.archive.org/web/20230328112515/https://sease.io/2023/03/elasticsearch-neural-search-tutorial.html/vector-search-diagram" data-orig-file="https://web.archive.org/web/20230328112515/https://i0.wp.com/sease.io/wp-content/uploads/2022/12/vector-search-diagram.png?fit=1920%2C1080&amp;ssl=1" data-orig-size="1920,1080" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vector-search-diagram" data-image-description="" data-image-caption="" data-medium-file="https://web.archive.org/web/20230328112515/https://i0.wp.com/sease.io/wp-content/uploads/2022/12/vector-search-diagram.png?fit=300%2C169&amp;ssl=1" data-large-file="https://web.archive.org/web/20230328112515/https://i0.wp.com/sease.io/wp-content/uploads/2022/12/vector-search-diagram.png?fit=1024%2C576&amp;ssl=1" decoding="async" width="1024" height="576" src="../Images/1bd0657206594d69a71c94a40f643a88.png" class="attachment-large size-large wp-image-55836" alt="" loading="lazy" srcset="https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2022/12/vector-search-diagram.png?w=1920&amp;ssl=1 1920w, https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2022/12/vector-search-diagram.png?resize=300%2C169&amp;ssl=1 300w, https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2022/12/vector-search-diagram.png?resize=1024%2C576&amp;ssl=1 1024w, https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2022/12/vector-search-diagram.png?resize=768%2C432&amp;ssl=1 768w, https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2022/12/vector-search-diagram.png?resize=1536%2C864&amp;ssl=1 1536w, https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2022/12/vector-search-diagram.png?resize=720%2C405&amp;ssl=1 720w" sizes="(max-width: 1000px) 100vw, 1000px" data-original-src="https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2022/12/vector-search-diagram.png?fit=1024%2C576&amp;ssl=1"/>											<figcaption class="widget-image-caption wp-caption-text">Vector search diagram (Source: <a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/what-is/vector-search" rel="nofollow">https://www.elastic.co/what-is/vector-search</a>)</figcaption>
										</figure>
								</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-e6267f6 elementor-widget elementor-widget-text-editor" data-id="e6267f6" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">像Apache Solr一样，Elasticsearch也在内部使用<em> Apache Lucene </em>作为其搜索引擎，所以许多底层概念、数据结构和算法同样适用于两者。<br/>即使在这种情况下，基于向量的搜索也是建立在<strong> Apache Lucene HNSW </strong>(分层可导航小世界图)之上，即Lucene 9的原生ANN(近似最近邻)。</p>
<p class="translated">使用Elasticsearch实现神经搜索的端到端管道是:</p>
<ol>
<li class="translated">下载Elasticsearch</li>
<li class="translated">外部产生矢量</li>
<li class="translated">为矢量搜索创建弹性搜索索引</li>
<li class="translated">索引文档</li>
<li class="translated">利用向量场的搜索</li>
</ol>
<p class="translated">我们现在将详细描述每个部分，以便您可以轻松地重现本教程。</p>
<p class="translated">让我们开始弄脏你的手吧！</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-110aa87 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="110aa87" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-4f79757 ot-flex-column-vertical" data-id="4f79757" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-aef017c elementor-widget elementor-widget-iheading" data-id="aef017c" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h3 class="main-heading translated">1.下载Elasticsearch</h3>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-0897a22 elementor-widget elementor-widget-text-editor" data-id="0897a22" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">如前所述，基于向量的搜索与Elasticsearch 8.0集成在一起，但在本教程中，我们使用8.5.3版本，您可以从以下网址下载:<br/><a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/downloads/past-releases#elasticsearch">https://www . elastic . co/downloads/past-releases # elastic Search</a></p>
<p class="translated"><em>验证下载文件的完整性，包括SHA和ASC密钥。</em></p>
<p class="has-text-align-justify translated">由于Elasticsearch是使用Java构建的，你需要确保Java开发工具包(<strong> JDK </strong>)安装在你的系统中；如果已经安装了Java，检查其版本，必须是<strong> 17或更高版本</strong>。</p>
<p class="has-text-align-justify translated">将下载的文件解压到您想要使用的位置，从该文件夹打开终端并在本地运行Elasticsearch:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-92f7f27 elementor-widget elementor-widget-text-editor" data-id="92f7f27" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>bin/elasticsearch</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-1381fea elementor-widget elementor-widget-text-editor" data-id="1381fea" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">首次启动Elasticsearch时，安全性会自动启用(更多信息<a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html">请点击</a>)。<br/>为了简单起见，在本教程中我们通过在<em>elasticsearch . yml</em>(<em>/elastic search-8 . 5 . 3/config/</em>)中设置<code>xpack.security.enabled: false</code>并重启elastic search节点来禁用它。</p>
<p class="translated">您可以通过键入:<code>curl localhost:9200</code>来验证Elasticsearch是否正确运行</p>
<p class="translated">我们现在准备使用Elasticsearch并与其REST APIs进行交互。这可以通过几种工具来实现:</p>
<ul>
<li class="translated">命令行(cURL)，如本教程所示</li>
<li class="translated">Kibana中的开发工具控制台(下载并注册Kibana)</li>
<li class="translated">API平台，比如Postman</li>
</ul>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-3ec2053 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="3ec2053" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-37a1963 ot-flex-column-vertical" data-id="37a1963" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-37ad3ac elementor-widget elementor-widget-iheading" data-id="37ad3ac" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h3 class="main-heading translated">2.外部产生矢量</h3>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-5ab7e1a elementor-widget elementor-widget-text-editor" data-id="5ab7e1a" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">Elastic 8.0允许用户使用PyTorch中开发的自定义或第三方语言模型直接在Elasticsearch中执行推理，但需要白金或企业订阅才能体验完整的机器学习功能。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-4208da9 elementor-widget elementor-widget-image" data-id="4208da9" data-element_type="widget" data-widget_type="image.default">
				<div class="elementor-widget-container">
								<div class="elementor-image">
												<img data-attachment-id="58019" data-permalink="https://web.archive.org/web/20230328112515/https://sease.io/2023/03/elasticsearch-neural-search-tutorial.html/elasticsearch-neural-search" data-orig-file="https://web.archive.org/web/20230328112515/https://i0.wp.com/sease.io/wp-content/uploads/2023/12/elasticsearch-neural-search.jpg?fit=1042%2C517&amp;ssl=1" data-orig-size="1042,517" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="elasticsearch neural search" data-image-description="" data-image-caption="" data-medium-file="https://web.archive.org/web/20230328112515/https://i0.wp.com/sease.io/wp-content/uploads/2023/12/elasticsearch-neural-search.jpg?fit=300%2C149&amp;ssl=1" data-large-file="https://web.archive.org/web/20230328112515/https://i0.wp.com/sease.io/wp-content/uploads/2023/12/elasticsearch-neural-search.jpg?fit=1024%2C508&amp;ssl=1" decoding="async" width="1024" height="508" src="../Images/8a44ea33454a80ceff59ebbfc2c3f2a2.png" class="attachment-large size-large wp-image-58019" alt="" loading="lazy" srcset="https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2023/12/elasticsearch-neural-search.jpg?w=1042&amp;ssl=1 1042w, https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2023/12/elasticsearch-neural-search.jpg?resize=300%2C149&amp;ssl=1 300w, https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2023/12/elasticsearch-neural-search.jpg?resize=1024%2C508&amp;ssl=1 1024w, https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2023/12/elasticsearch-neural-search.jpg?resize=768%2C381&amp;ssl=1 768w, https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2023/12/elasticsearch-neural-search.jpg?resize=720%2C357&amp;ssl=1 720w" sizes="(max-width: 1000px) 100vw, 1000px" data-original-src="https://web.archive.org/web/20230328112515im_/https://i0.wp.com/sease.io/wp-content/uploads/2023/12/elasticsearch-neural-search.jpg?fit=1024%2C508&amp;ssl=1"/>														</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-2659b16 elementor-widget elementor-widget-text-editor" data-id="2659b16" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<figure class="wp-block-table">
<figcaption class="wp-element-caption">Elastic Stack subscriptions: <a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/subscriptions" rel="nofollow">https://www.elastic.co/subscriptions</a></figcaption>
</figure>
<p class="has-text-align-justify translated">如果你想探索这个强大的NLP特性，可以看看这篇博文的第二部分<a href="https://web.archive.org/web/20230328112515/https://sease.io/wp-admin/post.php?post=56082&amp;action=edit">以一种非常简单的方式解释了企业版的所有步骤。</a></p>
<p class="has-text-align-justify translated">否则，如果您有基本许可证，要运行kNN搜索，您必须<strong>将您的数据转换成Elasticsearch </strong>的之外的有意义的矢量值<em>，并将它们作为<em> dense_vector </em>字段值添加到文档中。</em></p>
<p class="has-text-align-justify translated">为了将文本转换成相应的向量，我们使用了一个Python项目，你可以很容易地从我们的<a href="https://web.archive.org/web/20230328112515/https://github.com/SeaseLtd/vector-search-elastic-tutorial"> GitHub </a>页面中克隆和探索这个项目。</p>
<p class="has-text-align-justify translated">下面是为了从语料库中自动创建矢量嵌入而运行的python脚本:</p>
<p class="translated"><a href="https://web.archive.org/web/20230328112515/https://github.com/SeaseLtd/vector-search-elastic-tutorial/blob/main/from_text_to_vectors/batch-sentence-transformers.py">https://github . com/SeaseLtd/vector-search-elastic-tutorial/blob/main/from _ text _ to _ vectors/batch-sentence-transformers . py</a></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-0246709 elementor-widget elementor-widget-text-editor" data-id="0246709" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>from sentence_transformers import SentenceTransformer
import torch
import sys
from itertools import islice
import time

BATCH_SIZE = 100
INFO_UPDATE_FACTOR = 1
MODEL_NAME = <strong>'all-MiniLM-L6-v2'</strong>

# Load or create a SentenceTransformer model.
model = SentenceTransformer(MODEL_NAME)
# Get device like 'cuda'/'cpu' that should be used for computation.
if torch.cuda.is_available():
    model = model.to(torch.device("cuda"))
print(model.device)

def batch_encode_to_vectors(input_filename, output_filename):
    # Open the file containing text.
    with open(input_filename, 'r') as documents_file:
        # Open the file in which the vectors will be saved.
        with open(output_filename, 'w+') as out:
            processed = 0
            # Processing 100 documents at a time.
            for n_lines in iter(lambda: tuple(islice(documents_file, BATCH_SIZE)), ()):
                processed += 1
                if processed % INFO_UPDATE_FACTOR == 0:
                    print("Processed {} batch of documents".format(processed))
                # Create sentence embedding
                vectors = encode(n_lines)
                # Write each vector into the output file.
                for v in vectors:
                    out.write(','.join([str(i) for i in v]))
                    out.write('\n')

def encode(documents):
    embeddings = model.encode(documents, show_progress_bar=True)
    print('Vector dimension: ' + str(len(embeddings[0])))
    return embeddings

def main():
    <strong>input_filename = sys.argv[1]
    output_filename = sys.argv[2]</strong>
    initial_time = time.time()
    batch_encode_to_vectors(input_filename, output_filename)
    finish_time = time.time()
    print('Vectors created in {:f} seconds\n'.format(finish_time - initial_time))

if __name__ == "__main__":
    main()</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-0592cdb elementor-widget elementor-widget-text-editor" data-id="0592cdb" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">我们使用以下命令执行该脚本:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-cce8f6c elementor-widget elementor-widget-text-editor" data-id="cce8f6c" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>python batch-sentence-transformers.py "./example_input/documents_10k.tsv" "./example_output/vector_documents_10k.tsv"</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-efafd93 elementor-widget elementor-widget-iheading" data-id="efafd93" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>RESPONSE</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-d665c5d elementor-widget elementor-widget-text-editor" data-id="d665c5d" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>Processed 1 batch of documents
Batches: 100%|██████████| 4/4 [00:04&lt;00:00,  1.08s/it]
Vector dimension: 384
...
...
Processed 100 batch of documents
Batches: 100%|██████████| 4/4 [00:02&lt;00:00,  1.35it/s]
Vector dimension: 384
Vectors created in 402.041406 seconds</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-19de7f1 elementor-widget elementor-widget-text-editor" data-id="19de7f1" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated"><a href="https://web.archive.org/web/20230328112515/https://www.sbert.net/index.html"> SentenceTransformers </a>是一个Python框架，可以用来计算句子/文本嵌入；它提供了大量针对各种任务调整的<a href="https://web.archive.org/web/20230328112515/https://www.sbert.net/docs/pretrained_models.html">预训练模型</a>。<br/>在这种情况下，我们使用<strong><a href="https://web.archive.org/web/20230328112515/https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2">all-MiniLM-L6-v2</a></strong>(<em>BERT</em>)将句子映射到一个384维的密集向量空间。</p>
<p class="has-text-align-justify translated">对于本教程，我们从<a href="https://web.archive.org/web/20230328112515/https://microsoft.github.io/msmarco/">MARCO</a>女士那里下载了<a href="https://web.archive.org/web/20230328112515/https://microsoft.github.io/msmarco/Datasets.html#:~:text=Collection-,collection.tar.gz,-2.9%20GB">段落检索集</a>(一个用于深度学习的大规模信息检索数据集的集合)，并索引了大约10k个文档。</p>
<p class="has-text-align-justify translated">python脚本将包含10k个文档的文件(即MS MARCO passage检索集合的一小部分)作为输入:<br/><strong>sys . argv[1]=<em>"/path/to/documents _ 10k . tsv "</em></strong><br/><em>例如1个文档</em></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-f58d787 elementor-widget elementor-widget-text-editor" data-id="f58d787" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>The presence of communication amid scientific minds was equally important to the success of the Manhattan Project as scientific intellect was. The only cloud hanging over the impressive achievement of the atomic researchers and engineers is what their success truly meant; hundreds of thousands of innocent lives obliterated.</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-72177c7 elementor-widget elementor-widget-text-editor" data-id="72177c7" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">它会输出一个包含相应向量的文件:<br/><strong>sys . argv[2]=<em>"/path/to/vector _ documents _ 10k . tsv "</em></strong><br/><em>例如1个文档</em>。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-8ed9038 elementor-widget elementor-widget-text-editor" data-id="8ed9038" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>0.0367823,0.072423555,0.04770486,0.034890372,0.061810732,0.002282318,0.05258357,0.013747136,...,0.0054274425</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-85cbb0a elementor-widget elementor-widget-text-editor" data-id="85cbb0a" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">为了便于阅读，我们通过在响应中插入点来减少向量的长度。</p>
<p class="has-text-align-justify translated">然后，需要手动将获得的嵌入加载到Elasticsearch中(我们将在索引文档一节中看到这一点)。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-272b8ff ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="272b8ff" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-ece59c9 ot-flex-column-vertical" data-id="ece59c9" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-bee89b3 elementor-widget elementor-widget-iheading" data-id="bee89b3" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h3 class="main-heading translated">3.为矢量搜索创建弹性搜索索引</h3>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-4e24343 elementor-widget elementor-widget-text-editor" data-id="4e24343" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">在安装并启动Elasticsearch之后，我们准备好创建一个<strong>索引</strong>，使用<em>显式映射</em>，允许我们精确地选择如何定义数据。</p>
<p class="has-text-align-justify translated">下面是创建我们的'<em> <strong> neural_index </strong> </em>'的API:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-bfaba3f elementor-widget elementor-widget-text-editor" data-id="bfaba3f" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>curl http://localhost:9200/neural_index/ -XPUT -H 'Content-Type: application/json' -d '{
"mappings": {
    "properties": {
        <strong>"general_text_vector": {
            "type": "dense_vector",
            "dims": 384,
            "index": true,
            "similarity": "cosine"
        }</strong>,
        "general_text": {
            "type": "text"
        },
        "color": {
            "type": "text"
        }
    }
}}'</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-731ec33 elementor-widget elementor-widget-text-editor" data-id="731ec33" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">为了检查索引的创建，下面是返回相关信息的API:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-0a786c2 elementor-widget elementor-widget-text-editor" data-id="0a786c2" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>curl -XGET http://localhost:9200/neural_index</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-5fdbb5e elementor-widget elementor-widget-text-editor" data-id="5fdbb5e" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">按照我们的映射中的定义，文档由3个简单的字段组成:</p>
<ol>
<li class="translated"><strong> <code>general_text_vector</code> </strong>存储前面章节中看到的Python脚本生成的嵌入</li>
<li class="translated">文档<code><strong>text</strong></code>，源字段用文本来转换成矢量</li>
<li class="translated"><strong>颜色</strong>，一个额外的字段，仅用于显示过滤器查询行为(我们将在搜索部分看到它)</li>
</ol>
<p class="has-text-align-justify translated">最后两个字段被定义为<em>文本</em>(字段数据类型)，而第一个被定义为<em>密集向量字段</em>。</p>
<p class="has-text-align-justify translated">Elasticsearch目前支持通过<code><a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/guide/en/elasticsearch/reference/8.5/dense-vector.html">dense_vector</a></code>字段类型存储向量(浮点值),并使用它们来计算文档得分。<br/>在这种情况下，我们将其定义为:</p>
<ul>
<li class="translated"><strong> dims </strong> : (integer)要传入的密集向量的维度，需要等于模型维度。在这种情况下<em> 384 </em>。</li>
<li class="translated"><strong> index </strong> : (boolean)默认为false，但是您必须启用它<code>("index":true</code>来使用kNN搜索API搜索向量字段。</li>
<li class="translated"><strong>相似度</strong>:(字符串)向量相似度函数，用于返回前K个最相似的向量。在这种情况下，我们选择了<em>余弦</em>(而不是<em>L2 _范数</em>或<em>点积</em>)。只有当<code>index</code>是<code>true</code>时才需要。</li>
</ul>
<p class="has-text-align-justify translated">我们把<strong> <code>index_options</code> </strong>留为默认值；此部分配置<em> <i> </i> </em>高级参数，与当前算法(HNSW)密切相关，影响步进时构建图形的方式。<br/>你可以在Elasticsearch <a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/guide/en/elasticsearch/reference/8.5/dense-vector.html#dense-vector-params">文档</a>中找到更多关于密集矢量参数的信息。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-5388dfe elementor-widget elementor-widget-iheading" data-id="5388dfe" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>CURRENT LIMITATION:</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-94efd74 elementor-widget elementor-widget-text-editor" data-id="94efd74" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<ul>
<li class="translated">对于索引向量(<code>"index":true</code>)和非索引向量，向量的基数目前被限制为<strong> 1024 </strong>和2048</li>
<li class="translated"><code>dense_vector</code>类型不支持:<ul>
<li class="translated">排序或聚合</li>
<li class="translated">多值</li>
<li class="translated">如果在<code>nested</code>映射内，索引向量</li>
</ul>
</li>
</ul>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-0ea58f3 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="0ea58f3" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-499aee8 ot-flex-column-vertical" data-id="499aee8" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-c0dd9b6 elementor-widget elementor-widget-iheading" data-id="c0dd9b6" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h3 class="main-heading translated">4.索引文档</h3>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-790c8b1 elementor-widget elementor-widget-text-editor" data-id="790c8b1" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">一旦我们创建了矢量嵌入和索引，我们就可以推送一些文档了。</p>
<p class="has-text-align-justify translated">这是<em> <a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html"> _bulk </a> </em>请求API，您可以使用它将文档推入到您的神经索引中。<br/>例如，使用一份文件:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-09cbf17 elementor-widget elementor-widget-text-editor" data-id="09cbf17" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>curl http://localhost:9200/neural_index/<strong>_bulk</strong> -XPOST -H 'Content-Type: application/json' -d '
{"index": {"_id": "0"}}
{<strong>"general_text"</strong>: "The presence of communication amid scientific minds was equally important to the success of the Manhattan Project as scientific intellect was. The only cloud hanging over the impressive achievement of the atomic researchers and engineers is what their success truly meant; hundreds of thousands of innocent lives obliterated.", <strong>"general_text_vector"</strong>: [0.0367823, 0.072423555, ..., 0.0054274425], <strong>"color"</strong>: "black"}'</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-78ae0e6 elementor-widget elementor-widget-text-editor" data-id="78ae0e6" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">为了便于阅读，我们通过在请求中插入点来减少向量的长度。<br/> <a href="https://web.archive.org/web/20230328112515/https://github.com/SeaseLtd/vector-search-elastic-tutorial/blob/main/indexing_phase/create_body_for_bulk.py">在这里</a>你可以找到如何自动创建批量API请求的主体。</p>
<p class="has-text-align-justify translated">正因为矢量嵌入非常长，对于索引许多文档，我们建议使用另一种方法，即<a href="https://web.archive.org/web/20230328112515/https://elasticsearch-py.readthedocs.io/en/v8.5.3/"> elasticsearch </a>，elasticsearch的官方Python客户端。<br/>下面是我们用来一次性索引批量文档的定制python脚本:</p>
<p class="translated"><a href="https://web.archive.org/web/20230328112515/https://github.com/SeaseLtd/vector-search-elastic-tutorial/blob/main/indexing_phase/indexer_elastic.py">https://github . com/SeaseLtd/vector-search-elastic-tutorial/blob/main/indexing _ phase/indexer _ elastic . py</a></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-bccb505 elementor-widget elementor-widget-text-editor" data-id="bccb505" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>import sys
import time
import random
from elasticsearch import Elasticsearch
from elasticsearch.helpers import bulk

BATCH_SIZE = 1000

# Elastic configuration.
ELASTIC_ADDRESS = "http://localhost:9200"
INDEX_NAME = "neural_index"

def index_documents(documents_filename, embedding_filename, index_name, client):
    # Open the file containing text.
    with open(documents_filename, "r") as documents_file:
        # Open the file containing vectors.
        with open(embedding_filename, "r") as vectors_file:
            documents = []
            # For each document creates a JSON document including both text and related vector.
            for index, (document, vector_string) in enumerate(zip(documents_file, vectors_file)):

                vector = [float(w) for w in vector_string.split(",")]
                # Generate color value randomly (additional feature to show FILTER query behaviour).
                color = random.choice(['red', 'green', 'white', 'black'])

                doc = {
                    "_id": str(index),
                    "general_text": document,
                    "general_text_vector": vector,
                    "color": color,
                }
                # Append JSON document to a list.
                documents.append(doc)

                # To index batches of documents at a time.
                if index % BATCH_SIZE == 0 and index != 0:
                    # How you'd index data to Elastic.
                    indexing = bulk(client, documents, index=index_name)
                    documents = []
                    print("Success - %s , Failed - %s" % (indexing[0], len(indexing[1])))
            # To index the rest, when 'documents' list &lt; BATCH_SIZE.
            if documents:
                bulk(client, documents, index=index_name)
            print("Finished")

def main():
    document_filename = sys.argv[1]
    embedding_filename = sys.argv[2]
    
    # Declare a client instance of the Python Elasticsearch library.
    client = Elasticsearch(hosts=[ELASTIC_ADDRESS])
   
    initial_time = time.time()
    index_documents(document_filename, embedding_filename, INDEX_NAME, client)
    finish_time = time.time()
    print('Documents indexed in {:f} seconds\n'.format(finish_time - initial_time))

if __name__ == "__main__":
    main()</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-59df6e8 elementor-widget elementor-widget-text-editor" data-id="59df6e8" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">我们使用以下命令执行该脚本:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-92f34c5 elementor-widget elementor-widget-text-editor" data-id="92f34c5" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>python indexer_elastic.py "../from_text_to_vectors/example_input/documents_10k.tsv" "../from_text_to_vectors/example_output/vector_documents_10k.tsv"</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-110cb0a elementor-widget elementor-widget-iheading" data-id="110cb0a" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>RESPONSE</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-f668ab5 elementor-widget elementor-widget-text-editor" data-id="f668ab5" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>Success - 1001 , Failed - 0
Success - 1000 , Failed - 0
...
Finished
Documents indexed in 19.828323 seconds</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-5beb5c9 elementor-widget elementor-widget-text-editor" data-id="5beb5c9" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">python脚本将接受两个输入文件，一个包含文本，另一个包含相应的向量:<br/><strong>sys . argv[1]=<em>"/path/to/documents _ 10k . tsv "</em></strong><br/><strong>sys . argv[2]=<em>"/path/to/vector _ documents _ 10k . tsv "</em></strong></p>
<p class="has-text-align-justify translated">对于这两个文件的每个元素，脚本创建一个JSON文档(包括id、文本、向量和颜色)并将其添加到一个列表中；当列表达到BATCH_SIZE集合时，JSON文档将被推送到Elasticsearch。<br/>例如JSON:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-c9b6392 elementor-widget elementor-widget-text-editor" data-id="c9b6392" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>{<strong>'_id'</strong>: '0', <strong>'general_text'</strong>: 'The presence of communication amid scientific minds was equally important to the success of the Manhattan Project as scientific intellect was. The only cloud hanging over the impressive achievement of the atomic researchers and engineers is what their success truly meant; hundreds of thousands of innocent lives obliterated.\n', <strong>'general_text_vector'</strong>: [0.0367823, 0.072423555, 0.04770486, 0.034890372, 0.061810732, 0.002282318, 0.05258357, 0.013747136, -0.0060595, 0.020382827, 0.022016432, 0.017639274, ..., 0.0054274425], <strong>'color'</strong>: 'black'}</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-42958aa elementor-widget elementor-widget-text-editor" data-id="42958aa" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">在这一步之后，10，000个文档已经在Elasticsearch中被索引，我们已经准备好基于一个查询来检索它们。<br/>要检查文档计数，您可以使用显示集群中每个索引的高级信息的cat indices API:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-2433923 elementor-widget elementor-widget-text-editor" data-id="2433923" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>curl -XGET http://localhost:9200/_cat/indices
</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-a6d511a elementor-widget elementor-widget-text-editor" data-id="a6d511a" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">运筹学</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-d3f36cb elementor-widget elementor-widget-text-editor" data-id="d3f36cb" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>curl -XGET http://localhost:9200/_cat/count/neural_index?v
</code></pre>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-7e4bd84 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="7e4bd84" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-9aa2926 ot-flex-column-vertical" data-id="9aa2926" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-6e3caa1 elementor-widget elementor-widget-iheading" data-id="6e3caa1" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h3 class="main-heading translated">5.利用向量场的搜索</h3>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-43606a5 elementor-widget elementor-widget-text-editor" data-id="43606a5" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">密集向量场可通过以下方式使用:</p>
<ul>
<li class="translated"><strong>精确的强力kNN </strong>:使用<a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/guide/en/elasticsearch/reference/8.5/query-dsl-script-score-query.html"> script_score </a>查询</li>
<li class="translated"><strong>近似kNN </strong>:使用搜索API中的<a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/guide/en/elasticsearch/reference/8.5/search-search.html#search-api-knn">选项</a>，找到与查询向量最相似的<em> k个</em>向量</li>
</ul>
<p class="translated">为了进行一些查询，我们从Marco女士那里下载了段落检索查询:<a href="https://web.archive.org/web/20230328112515/https://msmarco.blob.core.windows.net/msmarcoranking/queries.tar.gz">queries.tar.gz</a></p>
<p class="translated">以下示例中报告的查询是:<code>"what is a bank transit number"</code>。为了将其转换成矢量，我们运行一个定制的python脚本:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-b16eb62 elementor-widget elementor-widget-text-editor" data-id="b16eb62" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>from sentence_transformers import SentenceTransformer

# The sentence we like to encode.
sentences = ["what is a bank transit number"]

# Load or create a SentenceTransformer model.
model = SentenceTransformer('sentence-transformers/all-MiniLM-L6-v2')

# Compute sentence embeddings.
embeddings = model.encode(sentences)

# Create a list object, comma separated.
vector_embeddings = list(embeddings)
print(vector_embeddings)</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-1c7cff3 elementor-widget elementor-widget-text-editor" data-id="1c7cff3" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">让我们用下面的命令执行这个脚本:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-025ee05 elementor-widget elementor-widget-text-editor" data-id="025ee05" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>python single-sentence-transformers.py
</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-78b1d19 elementor-widget elementor-widget-text-editor" data-id="78b1d19" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">输出是一个浮点数组:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-9d307b4 elementor-widget elementor-widget-text-editor" data-id="9d307b4" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>[array(<strong>[-9.01364535e-03, -7.26634488e-02, -1.73818860e-02, ..., ..., -1.16323479e-01]</strong>,dtype=float32)]</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-b93d5cb elementor-widget elementor-widget-text-editor" data-id="b93d5cb" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">现在，您可以复制并使用在kNN查询中获得的向量。<br/>以下是Elasticsearch中神经搜索查询的几个例子:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-1a75643 elementor-widget elementor-widget-iheading" data-id="1a75643" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">精确kNN</h4>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-7f32b69 elementor-widget elementor-widget-text-editor" data-id="7f32b69" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">运行包含向量函数的<em> script_score </em>查询，可以计算查询向量与索引中每个向量的相似性，由<em> script_score </em>排序。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-6426cf0 elementor-widget elementor-widget-iheading" data-id="6426cf0" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>REQUEST</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-6d68e81 elementor-widget elementor-widget-text-editor" data-id="6d68e81" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>curl http://localhost:9200/neural_index/_search -XPOST -H 'Content-Type: application/json' -d '{
"query": {
    "script_score": {
        "query" : {
            "match_all": {}
        },
        "script": {
            "source": "cosineSimilarity(params.queryVector, '\''general_text_vector'\'') + 1.0",
            "params": {
                "queryVector": [-9.01364535e-03, -7.26634488e-02, ..., -1.16323479e-01]
            }
        }
    }
}}'</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-c303efa elementor-widget elementor-widget-text-editor" data-id="c303efa" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">在这种情况下，我们使用了一个<code>match_all</code>查询来匹配所有文档，但是除非您使用非常小的索引，否则这个查询不是真正可伸缩的，并且会显著增加搜索延迟。<br/>如果您想对大型数据集使用该查询，建议在<em> script_score </em>中指定一个过滤查询，以限制传递给vector函数的匹配文档的数量。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-e75a01e elementor-widget elementor-widget-iheading" data-id="e75a01e" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">近似kNN</h4>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-54f2111 elementor-widget elementor-widget-text-editor" data-id="54f2111" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">为什么近似？因为Elasticsearch使用一种近似的方法进行kNN搜索，(即HNSW)，牺牲了结果精度来提高搜索速度和降低计算复杂度(特别是在大数据集上)；因此，搜索结果可能不总是真正的k个邻居。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-96a9d29 elementor-widget elementor-widget-iheading" data-id="96a9d29" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>REQUEST</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-ba835bd elementor-widget elementor-widget-text-editor" data-id="ba835bd" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>curl http://localhost:9200/neural_index/_search -XPOST -H 'Content-Type: application/json' -d '{
<strong>"knn": {
    "field": "general_text_vector",
    "query_vector": [-9.01364535e-03, -7.26634488e-02, ..., -1.16323479e-01],
    "k": 3,
    "num_candidates": 10
},</strong>
"_source": [
    "general_text",
    "color"
]}'</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-faa0010 elementor-widget elementor-widget-text-editor" data-id="faa0010" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">ANN(近似最近邻)集成到了<code>_search</code> API中，在请求体中增加了<code>knn</code>选项。<code>knn</code>对象的定义属性有:</p>
<ul>
<li class="translated"><strong>字段</strong>:(字符串)存储矢量嵌入的字段</li>
<li class="translated"><strong>query _ vector</strong>:(floats数组)方括号内表示查询的floats值列表；必须具有向量场的相同维数(即384)</li>
<li class="translated"><strong> k </strong> : (integer)要检索的最近邻的个数；必须小于<code>num_candidates</code></li>
<li class="translated"><strong> num_candidates </strong>:(整数)每个分片要考虑的近似最近邻候选的数量(&lt;= 10000)；增加这个数字可以提高准确性，但是会降低搜索速度</li>
</ul>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-f770772 elementor-widget elementor-widget-iheading" data-id="f770772" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>RESPONSE</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-c05aea5 elementor-widget elementor-widget-text-editor" data-id="c05aea5" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>{
    ...,
    "hits": {
       <strong> "total"</strong>: {
	    <strong>"value": 3,</strong>
	    "relation": "eq"
	},
	"max_score": 0.69120896,
	"hits": [{
	    "_index": "neural_index",
	    "_id": "<strong>7686</strong>",
	    "_score": 0.69120896,
	    "_source": {
	        "color": "green",
		"general_text": "A. A federal tax identification number ... of business.\n"
	    }
	}, {
	    "_index": "neural_index",
	    "_id": "<strong>7691</strong>",
	    "_score": 0.6840044,
	    "_source": {
	        "color": "white",
		"general_text": "A. A federal tax identification number ... by the IRS.\n"
	    }
	}, {
	    "_index": "neural_index",
	    "_id": "<strong>7692</strong>",
	    "_score": 0.6787193,
	    "_source": {
	        "color": "white",
		"general_text": "Letâs start at the beginning. A tax ID number ... for a person.\n"
	    }
	}]
    }
}</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-7ac2c91 elementor-widget elementor-widget-text-editor" data-id="7ac2c91" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">设置了<em> topK=3 </em>之后，我们得到了查询“<em>什么是银行转帐号</em>”的最佳三个文档。</p>
<p class="has-text-align-justify translated">该搜索为每个碎片计算<code>num_candidates</code>向量与查询向量的相似性(确定文档<a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/guide/en/elasticsearch/reference/8.5/search-search.html#search-api-response-body-score">_分数</a>)，从每个碎片中选择<code>k</code>个最相似的结果，并最终合并(来自每个碎片的)结果，返回全局前k个最近邻居。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-6c248c5 elementor-widget elementor-widget-iheading" data-id="6c248c5" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">近似kNN +预滤波</h4>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-dd4a308 elementor-widget elementor-widget-text-editor" data-id="dd4a308" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">Elasticsearch从8.2版本开始支持预过滤。</p>
<p class="translated">以下请求执行由<code>color</code>字段过滤的近似kNN搜索:</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-de4a2b0 elementor-widget elementor-widget-iheading" data-id="de4a2b0" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>REQUEST</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-0bb1549 elementor-widget elementor-widget-text-editor" data-id="0bb1549" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>curl http://localhost:9200/neural_index/_search -XPOST -H 'Content-Type: application/json' -d '{
<strong>"knn"</strong>: {
    "field": "general_text_vector",
    "query_vector": [-9.01364535e-03, -7.26634488e-02, ..., -1.16323479e-01],
    "k": 3,
    "num_candidates": 10,
    <strong>"filter": {
        "term": {
            "color": "white"
        }
    }</strong>
},
"fields": ["color"],
"_source": false
}'</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-8920f24 elementor-widget elementor-widget-iheading" data-id="8920f24" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>RESPONSE</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-1e765c0 elementor-widget elementor-widget-text-editor" data-id="1e765c0" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>{
    ...,
    "hits": {
       <strong> "total"</strong>: {
	   <strong> "value": 3,</strong>
	    "relation": "eq"
	},
	"max_score": 0.6840044,
	"hits": [{
	    "_index": "neural_index",
	    "_id": "<strong>7691</strong>",
	    "_score": 0.6840044,
	    "fields": {
	        "color": ["<strong>white</strong>"]
	    }
	}, {
	    "_index": "neural_index",
	    "_id": "<strong>7692</strong>",
	    "_score": 0.6787193,
	    "fields": {
	        "color": ["<strong>white</strong>"]
	    }
	}, {
	    "_index": "neural_index",
	    "_id": "<strong>7685</strong>",
	    "_score": 0.6716478,
	    "fields": {
	        "color": ["<strong>white</strong>"]
	    }
	}]
    }
}</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-b63a4c8 elementor-widget elementor-widget-text-editor" data-id="b63a4c8" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">设置<em> topK=3 </em>后，我们得到了查询“什么是银行转帐号”<strong>的三个最佳文档，颜色为“白色”。</strong></p>
<p class="has-text-align-justify translated">该查询确保返回<code>k</code>匹配的文档，因为过滤查询是在近似kNN搜索期间而不是之后应用的<strong>。</strong></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-290f75b elementor-widget elementor-widget-iheading" data-id="290f75b" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h4 class="main-heading translated">近似kNN +其他特性</h4>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-175ab42 elementor-widget elementor-widget-text-editor" data-id="175ab42" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">从8.4版本开始，也可以执行混合搜索。</p>
<p class="translated">在这个请求中，<code>knn</code>选项和<code>query</code>都通过一个析取来组合。</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-053a193 elementor-widget elementor-widget-iheading" data-id="053a193" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>REQUEST</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-7e7d8d8 elementor-widget elementor-widget-text-editor" data-id="7e7d8d8" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>curl http://localhost:9200/neural_index/_search -XPOST -H 'Content-Type: application/json' -d '{
<strong>"query"</strong>: {
    "match": {
        "general_text": {
            "query": "federal"
        }
    }
},
<strong>"knn"</strong>: {
    "field": "general_text_vector",
    "query_vector": [-9.01364535e-03, -7.26634488e-02, ..., -1.16323479e-01],
    "k": 3,
    "num_candidates": 10
},
"size": 5,
"_source": [
    "general_text"
]
}'</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-4ebd31c elementor-widget elementor-widget-iheading" data-id="4ebd31c" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>RESPONSE</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-06dff63 elementor-widget elementor-widget-text-editor" data-id="06dff63" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<pre class="wp-block-code"><code>{
    ...,
    "hits": {
        <strong>"total"</strong>: {
	    <strong>"value": 143,</strong>
	    "relation": "eq"
	},
	"max_score": 7.4108567,
	"hits": [{
	    "_index": "neural_index",
	    "_id": "7555",
	    "_score": 7.4108567,
	    "_source": {
	        "general_text": "Filed under: OPM Disability Process | Tagged: appeal deadlines during the fers disability process, average time frame for fers disability retirement, civil service disability, <strong>federal </strong>disability law blog, <strong>federal</strong> disability process timelines, <strong>federal </strong>disability retirement application and process,<strong> federal</strong> disabled employees and the patience needed, ...\n"
	    }
	}, {
	    "_index": "neural_index",
	    "_id": "8014",
	    "_score": 7.395675,
	    "_source": {
	        "general_text": "<strong>Federal</strong> law (5 U.S.C. 6103) establishes the public holidays listed in these pages for <strong>Federal</strong> employees. Please note that most <strong>Federal</strong> employees work on a Monday through Friday schedule.\n"
	    }
	}, {
	    "_index": "neural_index",
	    "_id": "2659",
	    "_score": 7.235115,
	    "_source": {
	        "general_text": "The authority of the <strong>Federal</strong> Reserve Banks to issue notes comes from the <strong>Federal </strong>Reserve Act of 1913. Legally, they are liabilities of the <strong>Federal</strong> Reserve Banks and obligations of the United States government.\n"
	    }
	}, {
	    "_index": "neural_index",
	    "_id": "3337",
	    "_score": 7.1420827,
	    "_source": {
	        "general_text": "<strong>Federal</strong> Employee Retirement System - FERS. DEFINITION of '<strong>Federal</strong> Employee Retirement System - FERS'. A system that became effective in 1987 and replaced the Civil Service Retirement System (CSRS) as the primary retirement plan for U.S. <strong>federal</strong> civilian employees.\n"
	    }
	}, {
	    "_index": "neural_index",
	    "_id": "580",
	    "_score": 7.111601,
	    "_source": {
	        "general_text": "<strong>Federal</strong> Laws vs. State Laws. <strong>Federal</strong> laws, or statutes, are created by the United States Congress to safeguard the citizens of this country. Some criminal acts are <strong>federal</strong> offenses only and must be prosecuted in U.S. District Court.\n"
	    }
	}]
    }
}</code></pre>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-c3b91f0 elementor-widget elementor-widget-text-editor" data-id="c3b91f0" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">此搜索:</p>
<ul>
<li class="translated">从每个碎片收集knn <code>num_candidates</code> (10)个结果</li>
<li class="translated">寻找全局顶部<code>k=3</code>向量匹配</li>
<li class="translated">将它们与来自<code>match</code>查询(<code>=federal</code>)的匹配相结合</li>
<li class="translated">最终返回5个得分最高的结果(即使总共有143次点击)</li>
</ul>
<p class="has-text-align-justify translated">分数通过将<code>knn</code>和<code>query</code>分数相加计算得出，也可以指定一个提升值，为每个分数赋予不同的权重。</p>
<p class="has-text-align-justify translated"><code>knn</code>选项也可与<a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html"> <code>aggregations</code> </a>一起使用，即在第一个<code>k</code>最近的文档上计算聚合，而不是在所有匹配搜索的文档上计算聚合。</p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-625daed ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="625daed" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-abe26c1 ot-flex-column-vertical" data-id="abe26c1" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-037551e elementor-widget elementor-widget-iheading" data-id="037551e" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        <h2 class="main-heading translated">摘要</h2>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-935d668 elementor-widget elementor-widget-text-editor" data-id="935d668" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="has-text-align-justify translated">我们希望这篇教程能帮助你理解如何在Elasticsearch中使用基于向量的搜索。</p>
<p class="has-text-align-justify translated">仍然有一些工作可以做，例如支持多值和改进重新排序以及与BERT和transformers的集成。<br/>事实上，这是一个<a href="https://web.archive.org/web/20230328112515/https://github.com/elastic/elasticsearch/issues/84324"> GitHub开放问题</a>，他们正在进行所有的人工神经网络搜索改进(新功能、增强、性能改进等)..).</p>
<p class="translated">如果你对密集向量的弹性基准很好奇，你可以在这里找到一些发表的结果<a href="https://web.archive.org/web/20230328112515/https://elasticsearch-benchmarks.elastic.co/#tracks/dense_vector/nightly/default/30d">。</a></p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-9efd18a elementor-widget-divider--view-line elementor-widget elementor-widget-divider" data-id="9efd18a" data-element_type="widget" data-widget_type="divider.default">
				<div class="elementor-widget-container">
					<div class="elementor-divider">
			<span class="elementor-divider-separator">
						</span>
		</div>
				</div>
				</div>
				<div class="elementor-element elementor-element-99097ef elementor-widget elementor-widget-iheading" data-id="99097ef" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>// references</span>
	        	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-75ed1c2 elementor-widget elementor-widget-text-editor" data-id="75ed1c2" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">密集矢量场类型:<a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/guide/en/elasticsearch/reference/8.5/dense-vector.html">https://www . elastic . co/guide/en/elastic Search/reference/8.5/dense-Vector . html</a><br/>kNN搜索:<a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/guide/en/elasticsearch/reference/current/knn-search.html">https://www . elastic . co/guide/en/elastic Search/reference/current/kNN-Search . html</a><br/><strong>博文:</strong><br/>–<a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/blog/text-similarity-search-with-vectors-in-elasticsearch">文本相似性搜索与矢量场</a><br/>–<a href="https://web.archive.org/web/20230328112515/https://www.elastic.co/blog/introducing-approximate-nearest-neighbor-search-in-elasticsearch-8-0">介绍近似最近</a></p>					</div>
						</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
				<section class="elementor-section elementor-top-section elementor-element elementor-element-3d1a3916 ot-traditional elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="3d1a3916" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div class="elementor-container elementor-column-gap-default">
							<div class="elementor-row">
					<div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-289d0b19 ot-flex-column-vertical" data-id="289d0b19" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
							<div class="elementor-widget-wrap">
						<div class="elementor-element elementor-element-73d7e7a elementor-widget elementor-widget-iheading" data-id="73d7e7a" data-element_type="widget" data-widget_type="iheading.default">
				<div class="elementor-widget-container">
					<div class="ot-heading">
	        	            <span>// our service</span>
	        <h2 class="main-heading translated">还在努力实现对Elasticsearch的神经搜索吗？</h2>	    </div>
	    		</div>
				</div>
				<div class="elementor-element elementor-element-1ca98a4d elementor-widget elementor-widget-text-editor" data-id="1ca98a4d" data-element_type="widget" data-widget_type="text-editor.default">
				<div class="elementor-widget-container">
								<div class="elementor-text-editor elementor-clearfix">
				<p class="translated">如果你正在纠结于这篇elasticsearch神经搜索教程，不要担心——我们会帮助你的！<br/>我们的团队提供<span style="color: #ffcc00;"> <strong>专家服务和培训</strong> </span>来帮助您优化您的Elasticsearch搜索引擎并充分利用您的系统。立即联系我们，了解更多信息！</p>					</div>
						</div>
				</div>
				<div class="elementor-element elementor-element-25cafa97 elementor-widget elementor-widget-ibutton" data-id="25cafa97" data-element_type="widget" data-widget_type="ibutton.default">
				<div class="elementor-widget-container">
					<div class="ot-button">
			<a href="https://web.archive.org/web/20230328112515/mailto:info@sease.io" class="octf-btn octf-btn-primary">Send us an e-mail</a>
	    </div>
	    		</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section>
									    
</body>
</html>